<html>
<head>
<title>Testing Private Methods with JUnit and SuiteRunner</title>
<meta name="description" content="This tutorial discusses whether to test private methods
and suggests several approaches." />
<meta name="keywords" content="xml, reporter, test, unit test, testing, tests, conformance testing, private, methods, Java" />
<meta name="author" content="Bill Venners" />
<link rel="stylesheet" type="text/css" href="/artima.css" />
<link rel="shortcut icon" href="/favicon.ico" />
</head>
<body><table width="100%" bgcolor="#FFFFFF" style="margin-top: 5px">
<tr>
<td align="center">
<div id="topbanner" style="height: 90px"><noscript><a href='http://www.artima.com/zcr/adclick.php?n=a86d37e9' target='_top'><img src='http://www.artima.com/zcr/adview.php?what=zone:1&amp;n=a86d37e9' border='0' alt='' /></a></noscript></div>
</td>
</tr>
</table>
<table width="100%" cellspacing="0">
<tr>
<td align="left" valign="bottom">
<a href="/index.jsp"><img src="/images/a7.gif" alt="The Artima Developer Community" border="0" width="550" height="43" /></a>
</td>
</table>
<table width="100%" bgcolor="#333333">
<tr>
<td align="center">
<div class="ml">
<a href="/articles" class="hl">Articles</a>&nbsp;|
<a href="/news/index.jsp" class="hl">News</a>&nbsp;|
<a href="/weblogs/index.jsp" class="hl">Weblogs</a>&nbsp;|
<a href="/buzz/index.jsp" class="hl">Buzz</a>&nbsp;|
<a href="/chapters/index.jsp" class="hl">Chapters</a>&nbsp;|
<a href="/forums/index.jsp" class="hl">Forums</a>
</div>
</td>
</tr>
</table>
<table width="100%" bgcolor="#CCCC99">
<tr>
<td align="center">
<div class="sc">
<a href="/suiterunner/index.html">Artima SuiteRunner</a>&nbsp;| 
<a href="/suiterunner/why.html">Why</a>&nbsp;| 
<a href="/suiterunner/start.html">Getting Started</a>&nbsp;| 
<a href="/suiterunner/tutorial.html">Tutorial</a>&nbsp;| 
<a href="/forums/forum.jsp?forum=61">Get Help</a>&nbsp;| 
<a href="/forums/flat.jsp?forum=226&thread=51132">Discuss</a>&nbsp;| 
<a href="/suiterunner/privateP.html">Print</a>&nbsp;| 
<a href="mailto:?subject=Testing Private Methods with JUnit and SuiteRunner&body= %0ATesting Private Methods with JUnit and SuiteRunner %0Aby Bill Venners %0A%0Ahttp://www.artima.com/suiterunner/private.html">Email</a>&nbsp;| 
First Page&nbsp;| 
Previous&nbsp;| 
<a href="/suiterunner/private2.html">Next</a>
</div>
</td>
</tr>
</table>
<table width="100%" bgcolor="#EEEEEE">
<tr>
<td align="center">
<div class="sc">
<span style="color: #555555">Sponsored Link</span> <span style="color: #888888">&bull;</span> 
<script language='JavaScript' type='text/javascript' src='http://www.artima.com/zcr/adx.js'></script>
<script language='JavaScript' type='text/javascript'>
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("http://www.artima.com/zcr/adjs.php?n=" + phpAds_random);
   document.write ("&amp;what=zone:9&amp;target=_top");   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href='http://www.artima.com/zcr/adclick.php?n=a799ecf6' target='_top'><img src='http://www.artima.com/zcr/adview.php?what=zone:9&amp;n=a0587811' border='0' alt=''></a></noscript>
</div>
</td>
</tr>
</table>
<BR>
<div class="vegies">
<div class="tc">
<span class="ts">Testing Private Methods with JUnit and SuiteRunner</span><br />
<span class="as">by Bill Venners</span><br />
<span class="pd">May 24, 2004</span><br />
</div>
<P>
<center>
<STRONG>Page 1 of 3</STRONG>&nbsp;&nbsp;<a href="private2.html">&gt;&gt;</a>
</center>
<p>

<table align="right" border="0" cellpadding="5" cellspacing="0">

<tr>

<td align="center">

<div style="margin-left: 15%;">

<div class="adnotice">Advertisement</div>
<script language='JavaScript' type='text/javascript' src='http://www.artima.com/zcr/adx.js'></script>
<script language='JavaScript' type='text/javascript'>
<!--
   if (!document.phpAds_used) document.phpAds_used = ',';
   phpAds_random = new String (Math.random()); phpAds_random = phpAds_random.substring(2,11);
   
   document.write ("<" + "script language='JavaScript' type='text/javascript' src='");
   document.write ("http://www.artima.com/zcr/adjs.php?n=" + phpAds_random);
   document.write ("&amp;what=zone:2&amp;target=_top&amp;block=1&amp;blockcampaign=1");
   document.write ("&amp;exclude=" + document.phpAds_used);
   if (document.referrer)
      document.write ("&amp;referer=" + escape(document.referrer));
   document.write ("'><" + "/script>");
//-->
</script><noscript><a href='http://www.artima.com/zcr/adclick.php?n=a799ecf6' target='_top'><img src='http://www.artima.com/zcr/adview.php?what=zone:2&amp;n=a799ecf6' border='0' alt=''></a></noscript>
</div>

</td>

</tr>

</table>

</p>

<blockquote>
<strong>Summary</strong><br>
This article compares four different approaches to testing
private methods in Java classes.
</blockquote>

<p>
<font size="+2"><b>M</b></font>y very first use of JUnit was to build a conformance test kit for the 
ServiceUI API [<a href="private3.html#r1">1</a>]. The purpose of a conformance test kit is to help ensure 
that alternate implementations of the same API are compatible with the API's 
specification. Because an API specification defines only the public 
interface of the API, not the API's implementation, a conformance test 
exercises only the public interface. In other words, a 
conformance test is a "black box" test. It treats the API under test as a 
black box, whose external interface can be seen, but whose internal 
implementation cannot. A conformance test of a Java API, therefore, 
need only access the public members of the packages and classes under test. 
There is no need to access package-level, protected, or private members.

<p>
When I later applied JUnit to the task of writing actual <em>unit</em> tests, 
as opposed to conformance tests, I found myself wanting to write white box 
tests&#8212;tests that employ knowledge of the internal implementation of 
the packages and classes under test. Whereas I only wanted to test public 
methods in my conformance tests, I wanted to write unit tests for package 
access and occasionally private methods as well as public methods.

<p>
Daniel Steinberg [<a href="private3.html#r2">2</a>] showed me the common JUnit technique
of using parallel source code 
trees, which allowed me to place test classes in the same package as the 
classes under test, but keep them in a different directory. This provided a clean
separation of test and production code. By placing both 
source trees in the CLASSPATH, my test classes could access package-level 
methods and classes in the package under test. This still left me, however, 
with the problem of testing private methods.

<p>
When I asked Daniel about testing private methods, he gently suggested that 
I test the private methods indirectly by testing the package-access and public 
methods that call the private ones. This answer did not quite satisfy me, 
because on occasion I really did feel the urge to directly test a private 
method. My initial solution was to just make such private methods package 
access, which allowed me to test them directly with JUnit from the test 
classes in the same package in the parallel source tree. This worked fine, but 
made me feel a bit dirty somehow. Although in general I discovered that 
thinking about how to design interfaces so they could be easily unit tested
helped me design better interfaces, in this case I felt I was making the design 
slightly worse to make it testable.

<p>
When I later ended up participating in the creation of what Frank Sommers,
Matt Gerrans, and I eventually 
released as Artima SuiteRunner [<a href="private3.html#r3">3</a>], I vowed that I would make the testing of 
private methods easier in SuiteRunner than it is in JUnit. But after 
investigating the various approaches to testing private methods, I decided not 
to do anything special in SuiteRunner to support testing private methods. So 
whether you are using JUnit or SuiteRunner, you have the same four basic 
approaches to testing private methods:

<ul>
<li>Don't test private methods.
<li>Give the methods package access.
<li>Use a nested test class.
<li>Use reflection.
</ul>

In this article, I will discuss these four approaches to testing private methods 
in Java. I will look at the advantages and disadvantages of each and attempt 
to shed some light on when it makes sense to use each approach.


<P>
<center>
<STRONG>Page 1 of 3</STRONG>&nbsp;&nbsp;<a href="private2.html">&gt;&gt;</a>
</center>
<br clear="all">
<p>
<center>
<div class="sc">
<a href="/suiterunner/index.html">Artima SuiteRunner</a>&nbsp;| 
<a href="/suiterunner/why.html">Why</a>&nbsp;| 
<a href="/suiterunner/start.html">Getting Started</a>&nbsp;| 
<a href="/suiterunner/tutorial.html">Tutorial</a>&nbsp;| 
<a href="/forums/forum.jsp?forum=61">Get Help</a>&nbsp;| 
<a href="/forums/flat.jsp?forum=226&thread=51132">Discuss</a>&nbsp;| 
<a href="/suiterunner/privateP.html">Print</a>&nbsp;| 
<a href="mailto:?subject=Testing Private Methods with JUnit and SuiteRunner&body= %0ATesting Private Methods with JUnit and SuiteRunner %0Aby Bill Venners %0A%0Ahttp://www.artima.com/suiterunner/private.html">Email</a>&nbsp;| 
First Page&nbsp;| 
Previous&nbsp;| 
<a href="/suiterunner/private2.html">Next</a>
</div>
</center>
</div>
<hr width="100%" />
<table width="50%" align="center">
<tr>
<td>
<div class="horizontaltextadbox">
<div class="adheadline">Sponsored Links</div>
<div id="sponsoredlinks">
</div>
</div>
</td>
</tr>
</table>
<hr width="100%" />
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3911176865765226";
google_alternate_color = "ffffff";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
google_color_border = "ffffff";
google_color_bg = "FFFFFF";
google_color_link = "003090";
google_color_text = "000000";
google_color_url = "666666";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br />
<br />
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom">
<table border="0" bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif"
border="0" alt="Google"></img></a>
</td>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="Artima.com"></input>
<input type="text" name="q" size="31" maxlength="255" value=""></input>
<input type="submit" name="sa" value="Search"></input>
</td></tr>
<tr>
<td>&nbsp;</td>
<td nowrap="nowrap">
<font size="-1" color="#000000">
<input type="radio" name="sitesearch" value=""></input> Web
<input type="radio" name="sitesearch" value="Artima.com" checked="checked"></input>Artima.com
</font>&nbsp;&nbsp;
<input type="hidden" name="client" value="pub-3911176865765226"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:50;LW:150;L:http://www.artima.com/images/artima150.gif;S:http://www.artima.com;FORID:1;"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</center>
<div class="sp">
<div style="text-align: center">
<a href="http://www.artima.com/copyright.html">Copyright</a> &copy; 1996-2009 Artima, Inc. All Rights Reserved.</a> - <a href="http://www.artima.com/privacy.html">Privacy Policy</a> - <a href="http://www.artima.com/termsofuse.html">Terms of Use</a> - <a href="http://www.artima.com/advertising.html">Advertise with Us</a>
</div>
</div>
<br />
<script language='JavaScript' type='text/javascript'>
<!--
function initBannerVarForZone(zone) {
        initBannerVarForZoneWithScript(zone, 'adjs_modified');
}

function initBannerVarForZoneWithScript(zone, phpScript) {

        if (!document.phpAds_used) document.phpAds_used = ',';
        phpAds_random = new String (Math.random());
        phpAds_random = phpAds_random.substring(2,11);

        var nextScriptSrc = 'http://www.artima.com/zcr/' + phpScript + '.php?n=' +
                phpAds_random  +
                '&amp;what=zone:' + zone + '&amp;target=_top&amp;block=1&amp;blockcampaign=1' +
                '&amp;exclude=' + document.phpAds_used;

        document.write("<script language='JavaScript' type='text/javascript' src='");
        document.write(nextScriptSrc);
        document.write("'><\/script>");

}

function replaceDiv(divID) {
        document.getElementById(divID).innerHTML = phpadsbanner;
}
-->
</script>
<script language='JavaScript' type='text/javascript'>
<!--
initBannerVarForZone(1);
-->
</script>

<script language='JavaScript' type="text/javascript">
<!--
replaceDiv('topbanner');
-->
</script>
<script language='JavaScript' type='text/javascript'>
<!--
initBannerVarForZoneWithScript(4, 'textman');
-->
</script>

<script language='JavaScript' type="text/javascript">
<!--
replaceDiv('sponsoredlinks');
-->
</script>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">

<html>
	<head>
	<meta http-equiv="refresh" content="300">
	<META http-equiv="Content-Style-Type" content="text/css">
	<META HTTP-EQUIV="Keywords" CONTENT="Re: createWeight protected,java-dev.lucene.apache.org,it,dev,business,information technology,development,software,programming,tech,information">
		<script type="text/javascript">
			var osDirAdList = []
			var disqus_developer = 0
			            var isIndexPage = false
            		       			
		</script>
		<link rel='stylesheet' href="/ml/css/defaultv4.css" type="text/css">
		<link rel='stylesheet' href="/ml/css/disqusv3.css" type="text/css">
		<title>
		Re: createWeight protected - msg#00803 - java-dev.lucene.apache.org		</title>
<script type="text/javascript" src="http://partner.googleadservices.com/gampad/google_service.js">
</script>
<script type="text/javascript">
GS_googleAddAdSenseService("ca-pub-2048202115983124");
GS_googleEnableAllServices();
</script>
<script type="text/javascript">
GA_googleAddSlot("ca-pub-2048202115983124", "mlTopBlock");
GA_googleAddSlot("ca-pub-2048202115983124", "MLTOP728x90");
GA_googleAddSlot("ca-pub-2048202115983124", "mlMsgInBlock");
GA_googleAddSlot("ca-pub-2048202115983124", "mlBlock2");
GA_googleAddSlot("ca-pub-2048202115983124", "mlBottomBlockLeft");
GA_googleAddSlot("ca-pub-2048202115983124", "mlBottomBlockRight");
GA_googleAddSlot("ca-pub-2048202115983124", "mlBottomLeaderboard");
GA_googleAddSlot("ca-pub-2048202115983124", "mlSkyscraperLeft");
GA_googleAddSlot("ca-pub-2048202115983124", "mlSkyscraperRightCol");
</script>
<script type="text/javascript">
  GA_googleFetchAds();
</script>
	</head>	
	<body>
	<table border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td align="left">
				<!-- FANCY BAR -->
				<div id="topBarBox" class="round10">
					<table border="0" cellpadding="0" cellspacing="0" width="100%" height="95">
						<tr>
							<td align="left" valign="middle" id="homeClick">
								<font size="+3">osdir.com</font><br/>
								<font size="-1">mailing list archive</font>
							</td>
							<td valign="middle">
								<center>
									<div id="osDirAd1Post" class="adContainer banner" style="height: 90px;"></div>
								</center>
							</td>
							<td align="right" valign="middle">
								<form action="http://osdir.com/ml/search.html" id="cse-search-box"> 							
								    <input type="hidden" name="cx" value="partner-pub-2048202115983124:opmgflpkuzq"> 
								    <input type="hidden" name="cof" value="FORID:10"> 
								    <input type="hidden" name="ie" value="ISO-8859-1"> 
									<div style="padding-top: 6px;">
								    <input type="text" name="q" size="28"> 
								    <input type="submit" name="sa" value="Search">
									</div> 
								</form>
								<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
							</td>
						</tr>
					</table>
				</div>
				<!-- END FANCY BAR -->
			</td>
		</tr>
<!-- #PAGE HEADER -->		
		<tr>
			<td>
				<center>
				<!-- <div id="adContainerDiv1" class="adContainer banner" style="display: inline; height: 150px;"></div> -->
				</center>
			</td>
		</tr>
<!-- #PAGE HEADER END-->
		<tr>
			<td>
<!-- PAGE MIDDLE -->
				<table border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td width="10" valign="top">
	<!-- LEFT COLUMN -->	
	<!-- LEFT COLUMN END -->
					</td>
					<td width="1150" valign="top">
	<!-- MIDDLE COLUMN -->
	                <div class="col1" style="min-width: 1110">
							<div class="osDirMsgContainer round10" id="osDirMsgPost">
									 
								<div class="osDirMessageTitle">
									<h1>Subject: Re: createWeight protected - msg#00803</h1>
									<h2>List: java-dev.lucene.apache.org</h2>
								</div>
								<div class="osDirPrevNext">
									<center>
									Date:
																			<a href='msg00802.html'>Prev</a>
																												<a href='msg00804.html'>Next</a>
										
									<a href='index.html#00803'>Index</a>
									Thread:
																			<a href='msg00795.html'>Prev</a>
																												<a href='msg00804.html'>Next</a>
										
									<a href='threads.html#00803'>Index</a>
									</center>
								</div>								
																<div id="messageOnly" style="min-height: 300px;">
																	<div id="adsense1Post" style="width: 340px;float: left;margin-right: 5px;">
									<!-- <a href="http://twollow.com" border="0"><img src="http://osdir.com/ml/images/Twollow-Banner.jpg" alt="twollow"></a> -->
									<!--
									<script type="text/javascript">
										google_ad_width = 336
										google_ad_height = 280
										google_ad_slot = "0196829317"
										google_ad_client = "pub-2048202115983124"
									</script>
									<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
									-->
									</div>							
									
									In LUCENE-1630 I&#39;ve deprecated createWeight in favor of a new createQueryWeight, also protected. So I can change the new one to public.<br><br>But note that Query has weight() and createWeight(), which I am still confused about why we have two of them. Maybe I can consolidate them to one?<br>
<br>Anyway, I think this better be handled as part of LUCENE-1630, since the Query and Weight classes are touched already in that are exactly.<br><br>Shai<br><br>On Tue, Jun 16, 2009 at 1:35 AM, Michael McCandless &lt;<a rel="nofollow" href="mailto:lucene@xxxxxxxxxxxxxxxxxx">lucene@xxxxxxxxxxxxxxxxxx</a>&gt; wrote:<br>
+1<br>
<br>
Mike<br>
<br>
On Mon, Jun 15, 2009 at 5:47 PM, Yonik Seeley&lt;<a rel="nofollow" href="mailto:yonik@xxxxxxxxxxxxxxxxxxxx">yonik@xxxxxxxxxxxxxxxxxxxx</a>&gt; wrote:<br>
&gt; I&#39;m simply trying to create a query wrapper class to hold some<br>
&gt; additional metadata, and delegate all operations to the wrapped query.<br>
&gt; Something as simple as that.... can&#39;t do it because of java<br>
&gt; permissions (outside of lucene).<br>
&gt;<br>
&gt; &#xA0;protected Weight createWeight(Searcher searcher) throws IOException {<br>
&gt; &#xA0; &#xA0;return q.createWeight(searcher); &#xA0;// we could call<br>
&gt; super.createWeight() but not q.createWeight() !<br>
&gt; &#xA0;}<br>
&gt;<br>
&gt; createWeight seems somewhat expert-level, but not overly so, and it<br>
&gt; does seem like it should be public instead of projected.<br>
&gt; Thoughts?<br>
&gt;<br>
&gt; -Yonik<br>
&gt; <a rel="nofollow" href="http://www.lucidimagination.com" target="_blank">http://www.lucidimagination.com</a><br>
&gt;<br>
&gt; ---------------------------------------------------------------------<br>
&gt; To unsubscribe, e-mail: <a rel="nofollow" href="mailto:java-dev-unsubscribe@xxxxxxxxxxxxxxxxx">java-dev-unsubscribe@xxxxxxxxxxxxxxxxx</a><br>
&gt; For additional commands, e-mail: <a rel="nofollow" href="mailto:java-dev-help@xxxxxxxxxxxxxxxxx">java-dev-help@xxxxxxxxxxxxxxxxx</a><br>
&gt;<br>
&gt;<br>
<br>
---------------------------------------------------------------------<br>
To unsubscribe, e-mail: <a rel="nofollow" href="mailto:java-dev-unsubscribe@xxxxxxxxxxxxxxxxx">java-dev-unsubscribe@xxxxxxxxxxxxxxxxx</a><br>
For additional commands, e-mail: <a rel="nofollow" href="mailto:java-dev-help@xxxxxxxxxxxxxxxxx">java-dev-help@xxxxxxxxxxxxxxxxx</a><br>
<br>
<br>								</div>
							<div class="blueBorder round10" style="padding: 5px;"><b>Thread at a glance:</b>
	                				                			<div class="osdirMsgPreview" id="osDirMsgPre3">
	                				<h3 onclick="toggleMe('osDirMsgPre3');">Previous Message by Date:
	                					<span style="font-size: 8pt">click to view message preview</span>
	                				</h3>
	                				<a href='msg00802.html'>Field.tokenStreamValue</a><br><br/>

















The JavaDoc suggests that one can't have a tokenStreamValue and a
StringValue or binaryValue at the same time... any good reason for
this restriction?

  /** The value of the field as a String, or null.  If null, the Reader value,
   * binary value, or TokenStream value is used.  Exactly one of stringValue(),
   * readerValue(), getBinaryValue(), and tokenStreamValue() must be set. */

The indexing code looks like it should actually work - but the Field
restricts one setting a tokenStreamValue and having a stored field at
the same time.
Should we fix this?

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@xxxxxxxxxxxxxxxxx
For additional commands, e-mail: java-dev-help@xxxxxxxxxxxxxxxxx
















	               				</div>
	               				      			
	                				                			<div class="osdirMsgPreview" id="osDirMsgPre4">
	                				<h3 onclick="toggleMe('osDirMsgPre4');">Next Message by Date:
	                					<span style="font-size: 8pt">click to view message preview</span>
	                				</h3>
	                				<a href='msg00804.html'>Re: createWeight protected</a><br><br/>

















On Mon, Jun 15, 2009 at 10:53 PM, Shai Erera&lt;serera@xxxxxxxxx&gt; wrote:
&gt; But note that Query has weight() and createWeight(), which I am still
&gt; confused about why we have two of them. Maybe I can consolidate them to one?

createWeight() raw weight, and weight() is a top-level normalized weight.
I don't think they should be consolidated, but good JavaDoc is needed.

But the fact that &quot;weight&quot; is also a non-static public member is
further evidence that createWeight() needs to be public (how else
would one provide a different implementation?)

&gt; Anyway, I think this better be handled as part of LUCENE-1630, since the
&gt; Query and Weight classes are touched already in that are exactly.

If it's going to make it into 2.9, that's fine.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@xxxxxxxxxxxxxxxxx
For additional commands, e-mail: java-dev-help@xxxxxxxxxxxxxxxxx
















	               				</div>
	               				      			

	                				                			<div class="osdirMsgPreview" id="osDirMsgPre1">
	                				<h3 onclick="toggleMe('osDirMsgPre1');">Previous Message by Thread:
	                					<span style="font-size: 8pt">click to view message preview</span>
	                				</h3>
	                				<a href='msg00795.html'>Re: createWeight protected</a><br><br/>

















+1

Mike

On Mon, Jun 15, 2009 at 5:47 PM, Yonik Seeley&lt;yonik@xxxxxxxxxxxxxxxxxxxx&gt; wrote:
&gt; I'm simply trying to create a query wrapper class to hold some
&gt; additional metadata, and delegate all operations to the wrapped query.
&gt; Something as simple as that.... can't do it because of java
&gt; permissions (outside of lucene).
&gt;
&gt; &#xA0;protected Weight createWeight(Searcher searcher) throws IOException {
&gt; &#xA0; &#xA0;return q.createWeight(searcher); &#xA0;// we could call
&gt; super.createWeight() but not q.createWeight() !
&gt; &#xA0;}
&gt;
&gt; createWeight seems somewhat expert-level, but not overly so, and it
&gt; does seem like it should be public instead of projected.
&gt; Thoughts?
&gt;
&gt; -Yonik
&gt; http://www.lucidimagination.com
&gt;
&gt; ---------------------------------------------------------------------
&gt; To unsubscribe, e-mail: java-dev-unsubscribe@xxxxxxxxxxxxxxxxx
&gt; For additional commands, e-mail: java-dev-help@xxxxxxxxxxxxxxxxx
&gt;
&gt;

---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@xxxxxxxxxxxxxxxxx
For additional commands, e-mail: java-dev-help@xxxxxxxxxxxxxxxxx
















	               				</div>
	               				      			
	                				                			<div class="osdirMsgPreview" id="osDirMsgPre2">
	                				<h3 onclick="toggleMe('osDirMsgPre2');">Next Message by Thread:
	                				<span style="font-size: 8pt">click to view message preview</span>
	                				</h3>
	                				<a href='msg00804.html'>Re: createWeight protected</a><br><br/>

















On Mon, Jun 15, 2009 at 10:53 PM, Shai Erera&lt;serera@xxxxxxxxx&gt; wrote:
&gt; But note that Query has weight() and createWeight(), which I am still
&gt; confused about why we have two of them. Maybe I can consolidate them to one?

createWeight() raw weight, and weight() is a top-level normalized weight.
I don't think they should be consolidated, but good JavaDoc is needed.

But the fact that &quot;weight&quot; is also a non-static public member is
further evidence that createWeight() needs to be public (how else
would one provide a different implementation?)

&gt; Anyway, I think this better be handled as part of LUCENE-1630, since the
&gt; Query and Weight classes are touched already in that are exactly.

If it's going to make it into 2.9, that's fine.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@xxxxxxxxxxxxxxxxx
For additional commands, e-mail: java-dev-help@xxxxxxxxxxxxxxxxx
















	               				</div>
	               											</div>
	               			</div>      			
					<center>	
												<script type="text/javascript"><!--
								google_ad_client = "pub-2048202115983124";
								/* 728x90, created 9/24/09 */
								google_ad_slot = "5363289200";
								google_ad_width = 728;
								google_ad_height = 90;
								//-->
							</script> 
							<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script> 
										<div style="padding-bottom: 10px; padding-top: 10px; border: 0px solid #000">
						<center> 
							<form action="http://osdir.com/ml/search.html" id="cse-search-box2"> 
							  <div> 
							    <input type="hidden" name="cx" value="partner-pub-2048202115983124:opmgflpkuzq"> 
							    <input type="hidden" name="cof" value="FORID:10"> 
							    <input type="hidden" name="ie" value="ISO-8859-1"> 
							    <input type="text" name="q" size="80"> 
							    <input type="submit" name="sa" value="Search"> 
							  </div> 
							</form>
						</center> 
						<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box2&amp;lang=en"></script> 
					</div>
					</center>
					<div id="disqus_thread" class="round10">Loading Comments...</div>
										
							<div style="padding-top: 5px;"><center>
								<div id="osDirAd4Post"></div>
							</center></div>		
							<div style="padding-top: 5px;"><center>
							<table border="0" cellpadding="0" cellspacing="0">
							<tr>
								<td><div id="osDirAd5Post"></div></td>
								<td><div id="osDirAd6Post"></div></td>
							</tr>
							</table>
							</center></div>							
	                </div>
	                <div>
	                	<center>
	                		<a href="/ml" title="Home">Home</a> | <a href="http://osdir.com">News</a> | <a href="/ml/site_dir/">Sitemap</a>  | <a rel="nofollow" href="http://osdir.com/ml/faq.php">FAQ</a> | <a rel="nofollow" href="http://osdir.com/Article9135.phtml">advertise</a>
	                		<p>Advertising by <a href="http://www.idgtechnetwork.com/media_kits/index.php" style="border:0px"><img src="http://osdir.com/images/tallogo.gif"></a></p> 
	                		 
	                	</center>
	                </div> 
	                
	<!-- MIDDLE COLUMN END -->
					</td>
					<td width="370" valign="top">
	<!-- RIGHT COLUMN -->
						<div id="adContainerDiv2" class="adContainer banner">
							<div id="osDirAd2Post" style="margin-left: 10px;"></div>
							<!-- End ad tag -->
							<!-- DISQUS POPULAR THREADS -->
							<div id="popularthreads" class="dsq-widget cleanDis blueBorder round10" style="width: 300px;margin-left: 10px;"> 
								<h2 class="dsq-widget-title round4">Popular Threads</h2> 
								<script type="text/javascript" src="http://disqus.com/forums/osdir/popular_threads_widget.js?num_items=5"></script>
								<a href="http://disqus.com/" class="smallLink">Powered by Disqus</a> 
							</div>  	 
							<!-- END DISQUS POPULAR THREADS -->
							
							<div id="osDirAd3Post" style="margin-left: 10px;"></div>
							
							<!-- DISQUS RECENT COMMENTS -->
							<div id="recentcomments" class="dsq-widget cleanDis  blueBorder round10" style="width: 300px;margin-left: 10px;"> 
								<h2 class="dsq-widget-title round4">Recent Comments</h2> 
								<script type="text/javascript" src="http://disqus.com/forums/osdir/recent_comments_widget.js?num_items=4&hide_avatars=0&avatar_size=16&excerpt_length=100"></script> 
								<a href="http://disqus.com/" class="smallLink">Powered by Disqus</a> 
							</div> 
							<!-- END DISQUS RECENT COMMENTS -->
							<table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tr>
								<td width="155">
									<div id="osDirAd7Post"></div>
								</td>
								<td valign="top" align="center">	
									<div id="osDirAd8Post"></div>
								</td>
							</tr>
							</table>
							
							
<!-- End ad tag -->

						</div>
	<!-- RIGHT COLUMN END -->
					</td>
				</tr>
				</table>
<!-- PAGE MIDDLE END-->
			</td>
		</tr>
		<tr>
			<td>
				<!-- PAGE FOOTER -->
			</td>
		</tr>
	</table>
	<br>

<script src="http://ajax.googleapis.com/ajax/libs/mootools/1.2.4/mootools-yui-compressed.js" type="text/javascript"></script>
<script>
//Add hotspot in banner
$('homeClick').addEvent('click',
	function(){
		document.location = "/ml/";
	}
);
//target _blank links.
//Don't convert links that are on index pages.
if (isIndexPage != true){
	$$("#messageOnly a").each(function(item){
			item.target = "_blank"
	})
	$$(".cleanDis a").each(function(item){
			item.target = "_blank"
	})
}
//Preview mechanics

var tmpToggleHeight = new Object();
function toggleMe(theDiv){
	if(!tmpToggleHeight[theDiv]){
		$(theDiv).style.height="6em"
		tmpToggleHeight[theDiv] = 6
	} else {
		$(theDiv).style.height="2.5em"
		tmpToggleHeight[theDiv] = 0	
	}
}

</script>
<!-- POST LOAD TRICKERY -->
<script type="text/javascript">
var adList = []
//var ord = Math.random()*10000000000000000;              
var isIE = (document.all) ? 1 : 0
function replaceAd(ad){ 	
	if (isIE){
		adList.push(ad)
	} else {	
		$(ad + "Pre").replaces(ad + "Post")
	}
}
</script>
<div style="display: none;">
	<div id="osDirAd1Pre">
		<script type="text/javascript">
			GA_googleFillSlot("MLTOP728x90");
			replaceAd("osDirAd1");
		</script>  
	</div>
	<div id="adsense1Pre" style="width: 340px;float: left;margin-right: 5px;">
		<script type="text/javascript">
			GA_googleFillSlot("mlMsgInBlock");
			replaceAd("adsense1");
		</script>  
	</div>
	<div id="osDirAd2Pre">
		<script type="text/javascript">
			GA_googleFillSlot("mlBlock2");
			replaceAd("osDirAd2");
		</script>  
	</div>
	<div id="osDirAd3Pre">
		<script type="text/javascript">
			GA_googleFillSlot("mlTopBlock");
			replaceAd("osDirAd3");
		</script>  
	</div>
	<div id="osDirAd4Pre">
		<script type="text/javascript">
			GA_googleFillSlot("mlBottomLeaderboard");
			replaceAd("osDirAd4");
		</script>  
	</div>
	<div id="osDirAd5Pre">
		<script type="text/javascript">
			GA_googleFillSlot("mlBottomBlockLeft");
			replaceAd("osDirAd5");
		</script>  
	</div>
	<div id="osDirAd6Pre">
		<script type="text/javascript">
			GA_googleFillSlot("mlBottomBlockRight");
			replaceAd("osDirAd6");
		</script>  
	</div>
	<div id="osDirAd7Pre">
		<script type="text/javascript">
			GA_googleFillSlot("mlSkyscraperLeft");
			replaceAd("osDirAd7");
		</script>  
	</div>
	<div id="osDirAd8Pre">
		<script type="text/javascript">
			GA_googleFillSlot("mlSkyscraperRightCol");
			replaceAd("osDirAd8");
		</script>  
	</div>
</div>
<script type="text/javascript">
if(isIE){
	adList.each(function(ad){
		$(ad + "Post").grab(ad + "Pre")
	})
	
}
</script>
<!-- GOOGLE URCHIN -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
<script type="text/javascript">
	_uacct = "UA-381510-10";
	urchinTracker();
</script>
<!-- END GOOGLE URCHIN -->

</body>
<script type="text/javascript">
	o = $('disqus_thread')
	o.innerHTML=""
/*
//Inject disqus css
	c = new Element('link')
	c.rel = "stylesheet"
	o.appendChild(c)
	c.href = "/ml/css/disqusv2.css"
*/
//Inject disqus comment box
	s = new Element('script')
	o.grab(s);
	window.disqus_no_style = true;
	s.src = "http://disqus.com/forums/osdir/embed.js"
	o.style.display = "block"
</script>
</html>

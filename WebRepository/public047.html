<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>public virtual MemoryStream: Java Archives</title>

<link rel="stylesheet" href="http://www.hutteman.com/weblog/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://www.hutteman.com/weblog/rss.xml" />

<script language="javascript" type="text/javascript">
function OpenComments (c) {
    window.open(c,
                    'comments',
                    'width=480,height=480,scrollbars=yes,status=yes,resizable=yes');
}

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes,resizable=yes');
}
</script>

</head>

<body>

<div id="banner">
<h1><a href="http://www.hutteman.com/weblog/" accesskey="1">public virtual MemoryStream</a></h1>
<span class="description">Luke Hutteman on Java, .NET, J2EE, RSS and whatever else comes to mind...</span>
</div>

<div id="googleAds">

<script type="text/javascript"><!--
google_ad_client = "pub-3166372203536095";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_channel ="5033211086";
google_color_border = "336699";
google_color_bg = "FFFFFF";
google_color_link = "0000FF";
google_color_url = "008000";
google_color_text = "000000";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</div>

<div id="container">

<div class="blog">
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://www.hutteman.com/weblog/cat_java.html#000245"
    trackback:ping="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi/208"
    dc:title="Why I Hate Frameworks"
    dc:identifier="http://www.hutteman.com/weblog/cat_java.html#000245"
    dc:subject="Java"
    dc:description="Benji Smith in Why I Hate Frameworks: So this week, we&apos;re introducing a general-purpose tool-building factory factory factory, so that all of your different tool factory factories can be produced by a single, unified factory. The factory factory factory will produce only the tool factory factories that you actually need, and each of those factory factories will produce a single..."
    dc:creator=""
    dc:date="2006-03-09T22:06:27-05:00" />
</rdf:RDF>
-->


	<a name="000245"></a>

        <div class="day">
	<div class="entryDate">Thursday, March  9, 2006 10:06 PM
	
        </div>
	<div class="entryTitle"><a href="http://www.hutteman.com/weblog/2006/03/09-245.html">Why I Hate Frameworks</a></div>

	<div class="blogbody">
	
	<p><a href="http://benjismith.net/">Benji Smith</a> in <a href="http://discuss.joelonsoftware.com/default.asp?joel.3.219431.12">Why I Hate Frameworks</a>:</p>
<blockquote>
So this week, we're introducing a general-purpose tool-building factory factory factory, so that all of your different tool factory factories can be produced by a single, unified factory. The factory factory factory will produce only the tool factory factories that you actually need, and each of those factory factories will produce a single factory based on your custom tool specifications. The final set of tools that emerge from this process will be the ideal tools for your particular project.
</blockquote>
<p>
A great read that not only shows why I too hate most frameworks, but also over-engineered code in general. YAGNI FTW! (via <a href="http://pluralsight.com/blogs/dbox/archive/2006/03/08/19865.aspx">Don Box</a>)
</p>

	
	
<!--	
	<div class="posted">Posted by Luke 
        in <a href="cat_c.html">C#</a>, <a href="cat_java.html">Java</a>
        at <a href="http://www.hutteman.com/weblog/2006/03/09-245.html">10:06 PM</a>
	
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi?__mode=view&amp;entry_id=245" onclick="OpenTrackback(this.href); return false">TrackBack (0)</a>
	
	</div>
-->	
	</div>

	</div>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://www.hutteman.com/weblog/cat_java.html#000227"
    trackback:ping="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi/190"
    dc:title="JVM hack implementations, and why I love Java"
    dc:identifier="http://www.hutteman.com/weblog/cat_java.html#000227"
    dc:subject="Java"
    dc:description=" During a Java debug session today, I was investigating an exception and noticed that its cause was set to itself; effectively leading to an infinite stacktrace (or so I thought). When I added a watch on exception.getCause(), this returned null though, so I initially assumed this was a bug in my IDE (I&apos;m using a beta release of IDEA..."
    dc:creator=""
    dc:date="2005-06-03T23:15:59-05:00" />
</rdf:RDF>
-->


	<a name="000227"></a>

        <div class="day">
	<div class="entryDate">Friday, June  3, 2005 11:15 PM
		<br><a href="http://www.hutteman.com/weblog/2005/06/03-227.html#comments">6 Comments</a>
	
        </div>
	<div class="entryTitle"><a href="http://www.hutteman.com/weblog/2005/06/03-227.html">JVM hack implementations, and why I love Java</a></div>

	<div class="blogbody">
	
	<p>
During a Java debug session today, I was investigating an exception and noticed
that its <code>cause</code> was set to itself; effectively leading to an infinite
stacktrace (or so I thought).
</p><p>
When I added a watch on <code>exception.getCause()</code>, this returned
<code>null</code> though, so I initially assumed this was a bug in my IDE (I'm using a beta release of <a href="http://www.jetbrains.com/idea/features/newfeatures.html">IDEA 5.0</a>).
However, a quick check of the source-code of <code>Throwable</code> disproved that initial assumption. As
it turns out, this problem is caused by a JVM hack implementation.
</p><p>
Take a look at the excerpt from <code>Throwable</code> below:

<blockquote><pre>
  /**
   * The throwable that caused this throwable to get thrown, or null if this
   * throwable was not caused by another throwable, or if the causative
   * throwable is unknown.  If this field is equal to this throwable itself,
   * it indicates that the cause of this throwable has not yet been
   * initialized.
   *
   * @serial
   * @since 1.4
   */
  private Throwable cause = this;

  public Throwable getCause() {
      return (cause==this ? null : cause);
  }

  public synchronized Throwable initCause(Throwable cause) {
      if (this.cause != this)
          throw new IllegalStateException("Can't overwrite cause");
      if (cause == this)
          throw new IllegalArgumentException("Self-causation not permitted");
      this.cause = cause;
      return this;
  }
</pre></blockquote>

It turns out that self-causation is the default state; indicating that the
<code>cause</code> has not yet been initialized. In other words, it's nothing
but a hack to save the developer from either adding a <code>causeInitialized boolean</code>
to <code>Throwable</code>, or (if they really felt they need to save those 4 bytes),
doing something like

<blockquote><pre>
  private static Throwable NOT_INITIALIZED =
             new Throwable("CAUSE NOT INITIALIZED", null);
    
  private Throwable cause = NOT_INITIALIZED;
</pre></blockquote>

Now from a runtime-perspective, this hack really doesn't matter as <code>cause</code>
is <code>private</code> and the <code>this</code> initial value is never returned
to the user. Unfortunately from a debug-perspective, this implementation is utterly
confusing.
</p><p>
So why do I still say I love Java? Because, unlike .NET for instance, I have access to the
source-code in moments like this. Language-wise, I actually prefer C# over Java. Library-wise, I also tend to favor the .NET implementations
over their Java counterparts. But with .NET, if something works somewhat differently
from what I would expect, I don't have the option of checking the actual implementation.
To me, this is a <b>BIG DEAL</b>. Having the source available is not only helpful in situations
like this, but it's also a tremendous aid when you truly want to grok an API.
</p><p>
And yes, I'm aware of the existence of Rotor and decompilers, but
<ol type='a'>
<li>Rotor is an incomplete implementation, lacking all of WinForms for instance.</li>
<li>Decompilation is not perfect and sometimes leads to awkward looking code.</li>
<li>Checking code from either Rotor or decompiling a class tends to not be integrated in VS.NET, so I'm forced to leave the IDE for tasks like this.</li>
<li>.NET decompilers typically show only one decompiled method at a time (the ones I've tried did this anyway) instead of the full
class, leading to a more fragmented view of the code.</li>
<li>Decompiled code lacks comments and sometimes even lacks the original variable-names.</li>
</ol>
</p><p>
There's been some dialog going on for over a year now about open-sourcing Java, but as far as I'm concerned, Java's already open-source enough. I just wish .NET would follow Java's example on this aspect as well. I don't need a license to allow me to change the source, but it sure would be nice if Microsoft would surprise me and include the source in .NET 2.0...
</p>
	
	
<!--	
	<div class="posted">Posted by Luke 
        in <a href="cat_c.html">C#</a>, <a href="cat_java.html">Java</a>
        at <a href="http://www.hutteman.com/weblog/2005/06/03-227.html">11:15 PM</a>
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-comments.cgi?entry_id=227" onclick="OpenComments(this.href); return false">Comments (5)</a>
	
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi?__mode=view&amp;entry_id=227" onclick="OpenTrackback(this.href); return false">TrackBack (1)</a>
	
	</div>
-->	
	</div>

	</div>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://www.hutteman.com/weblog/cat_c.html#000224"
    trackback:ping="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi/187"
    dc:title="C# Continuations useful? Hell yeah!"
    dc:identifier="http://www.hutteman.com/weblog/cat_c.html#000224"
    dc:subject="C#"
    dc:description="Last week, Sam Ruby posted a very interesting article on continuations for &quot;people older than dirt&quot; (a category which I, according to his definition, fall into). The topic became even more interesting when Don Box posted how you can use a very similar syntax in the next iteration of C#. Shortly thereafter, Cedric Beust posted that he wasn&apos;t convinced on..."
    dc:creator=""
    dc:date="2005-04-26T00:41:59-05:00" />
</rdf:RDF>
-->


	<a name="000224"></a>

        <div class="day">
	<div class="entryDate">Tuesday, April 26, 2005 12:41 AM
		<br><a href="http://www.hutteman.com/weblog/2005/04/26-224.html#comments">19 Comments</a>
	
        </div>
	<div class="entryTitle"><a href="http://www.hutteman.com/weblog/2005/04/26-224.html">C# Continuations useful? Hell yeah!</a></div>

	<div class="blogbody">
	
	<p>Last week, Sam Ruby posted a very interesting <a href="http://www.intertwingly.net/blog/2005/04/13/Continuations-for-Curmudgeons">article</a> on continuations for "people older than dirt" (a category which I, according to his definition, fall into). The topic became even more interesting when Don Box <a href="http://pluralsight.com/blogs/dbox/archive/2005/04/17/7467.aspx">posted</a> how you can use a very similar syntax in the next iteration of C#. Shortly thereafter, Cedric Beust <a href="http://beust.com/weblog/archives/000272.html">posted</a> that he wasn't convinced on the usefulness of this construct, and that a simple Java class without continuations pretty much does the same thing.
</p><p>
Despite having, like Cedric, mainly a Java background, I do think this construct will be useful, and would welcome it in the next release (that seems to be the established pattern anyway). Consider the example of trying to write a filtered Iterator. Using the C# 2.0, the code almost writes itself:

<pre>
    class Program
    {
        public static IEnumerable&lt;T> IteratorFilter&lt;T>(IEnumerable&lt;T> iterator,
                                                       Predicate&lt;T> predicate)
        {
            foreach (T value in iterator)
            {
                if (predicate(value))
                {
                    yield return value;
                }
            }
        }

        static void Main()
        {
            int[] values = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};
            foreach(int i in IteratorFilter(values, 
                    delegate(int v){ return v%2 == 0; }))
            {
                Console.WriteLine(i); // even numbers only
            }
        }
    }
</pre>

The same can definitely not be said for Java. My initial version took quite a bit longer to create than the C# version, and ended up looking like this:

<pre>
    public interface Predicate&lt;T> {
        boolean evaluate(T value);
    }

    public class IteratorFilter&lt;T> implements Iterator&lt;T> {
        private Iterator&lt;T> _iterator;
        private Predicate&lt;T> _predicate;
        private T _currentValue;
        private boolean _hasNext = true;
    
        public IteratorFilter(Iterator&lt;T> iterator, Predicate&lt;T> predicate) {
            _iterator = iterator;
            _predicate = predicate;
            skipFiltered();
        }
    
        private void skipFiltered() {
            while (_iterator.hasNext()) {
                _currentValue = _iterator.next();
                if (_predicate.evaluate(_currentValue)) {
                    return;
                }
            }
            _hasNext = false;
        }
    
        public boolean hasNext() {
            return _hasNext;
        }
    
        public T next() {
            if (!_hasNext) {
                throw new NoSuchElementException();
            }
            T result = _currentValue;
            skipFiltered();
            return result;
        }
    
        public void remove() {
            throw new UnsupportedOperationException();
        }
    
        public static void main(String[] args) {
            Integer[] values = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};
            Iterator&lt;Integer> i = new IteratorFilter&lt;Integer>(
                    Arrays.asList(values).iterator(), 
                    new Predicate&lt;Integer>() {
                        public boolean evaluate(Integer value) {
                            return value % 2 == 0;
                        }
                    });
    
            while(i.hasNext()) {
                System.out.println(i.next());
            }
        }
    }
</pre>

Ouch! Without continuations, there's no option to just iterate over the elements and filter out the unwanted values, like I did in the C# implementation. Instead, I'm forced to create a class that implements the <code>Iterator</code> interface, store <code>_currentValue</code> and <code>_hasNext</code> as fields, and create a <code>skipFiltered()</code> method to skip unwanted values.
</p><p>
I am aware that C#'s <code>IEnumarable</code> isn't exactly the same as a Java <code>Iterator</code>; in a way it's more like a subset of Java's <code>Collection</code>. However, creating a Java function that creates a new <code>Collection</code> (containing the filtered subset of the original) wouldn't be quite the same as it would create a second Collection and have all filtering done up-front, instead of just an iterator whose elements are fetched from the original in an on-demand fashion.
</p><p>
Disclaimer: I am by no means an expert on the new constructs in C# 2.0 or Java 5.0 (far from it) - if I've overlooked something, please let me know in the comment section below.
</p>
	
	
<!--	
	<div class="posted">Posted by Luke 
        in <a href="cat_c.html">C#</a>, <a href="cat_java.html">Java</a>
        at <a href="http://www.hutteman.com/weblog/2005/04/26-224.html">12:41 AM</a>
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-comments.cgi?entry_id=224" onclick="OpenComments(this.href); return false">Comments (17)</a>
	
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi?__mode=view&amp;entry_id=224" onclick="OpenTrackback(this.href); return false">TrackBack (2)</a>
	
	</div>
-->	
	</div>

	</div>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://www.hutteman.com/weblog/cat_java.html#000199"
    trackback:ping="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi/162"
    dc:title="JavaOne Report: The MemoryModel and Concurrency Utilities"
    dc:identifier="http://www.hutteman.com/weblog/cat_java.html#000199"
    dc:subject="Java"
    dc:description="For me, the most interesting sessions of the conference were regarding the new MemoryModel and Concurrency Utilities. Having recently done quite a bit of threading code, it&apos;s clear that JDK 5.0 will vastly improve on the current primitives synchronized, wait and notify (which will, of course, still be supported in JDK 5.0, though they probably won&apos;t be used as much)...."
    dc:creator=""
    dc:date="2004-07-04T00:56:33-05:00" />
</rdf:RDF>
-->


	<a name="000199"></a>

        <div class="day">
	<div class="entryDate">Sunday, July  4, 2004 12:56 AM
		<br><a href="http://www.hutteman.com/weblog/2004/07/04-199.html#comments">9 Comments</a>
	
        </div>
	<div class="entryTitle"><a href="http://www.hutteman.com/weblog/2004/07/04-199.html">JavaOne Report: The MemoryModel and Concurrency Utilities</a></div>

	<div class="blogbody">
	
	<p>For me, the most interesting sessions of the conference were regarding the new MemoryModel and Concurrency Utilities. Having recently done quite a bit of threading code, it's clear that JDK 5.0 will vastly improve on the current primitives <code>synchronized</code>, <code>wait</code> and <code>notify</code> (which will, of course, still be supported in JDK 5.0, though they probably won't be used as much).
</p><p>
The new memory model will ensure that things will work much more intuitively than they currently do. The double-checked locking idiom for instance is broken right now due to allowed statement re-ordering and caching of variables in registers (this, by the way, is not just a Java-issue, it's also broken in languages like C++ and C#). Now statement reordering (either by the compiler or by the processor) and caching of values in registers are extremely important features for performance so they cannot simply be turned off to make stuff like this work. Using new definitions for <code>volatile</code> and <code>synchronized</code>, stating when they should read/write to memory (as opposed to using cached values), things will work much better and more intuitively in JDK 5.0.
</p><p>
The new concurrency utilities package (based on Doug Lea's threading libraries) contains a lot of new Classes and Interfaces to make writing multi-threaded code much easier. The idea behind this package is to do for threading what the collections framework did for collections. When they first mentioned this, I was rather skeptical to say the least. At the end of the session though, I believed they might just pull it off.
</p><p>
The concurrent utilities package will implement thread pooling through <code>Executor</code>s. The <code>Executor</code> interface consists of a single "<code>void execute(Runnable command)</code>" method, so is effectively just "something that runs <code>Runnable</code>s". This can be a single threaded worker, a regular thread pool, a scheduled thread pool or even a custom implementation. There's an <code>Executors</code> class which has factory methods to create many commonly used types of <code>Executor</code>s. The actual type returned by these factory methods is typically an "<code>ExecutorService</code>": a sub-interface of <code>Executor</code> with added methods to, among other things, manage termination of the pool.
</p><p>
JDK 5 also introduces concurrent collections. These collections achieve thread safety while still allowing certain operations to occur concurrently. While using the <code>synchronized</code> keyword often requires placing a lock on the entire collection during iteration, concurrent collections will allow multiple operations to overlap each other. The new <code>ConcurrentHashMap</code> class for instance allows overlap of multiple reads, reads over writes and even up to 15 overlapping writes (it will be interesting to check out the code to see how they pulled off the concurrent writes). Also, iteration over a <code>ConcurrentHashMap</code> will never throw a <code>ConcurrentModificationException</code>. 
</p><p>
Another example of a concurrent collection is the <code>CopyOnWriteArrayList</code> - this class is optimized for cases where iteration is much more frequent than insertion or removal. It is for instance ideal for EventListeners. As the name suggests, every write causes the current collection data to be copied, thus guaranteeing that no <code>ConcurrentModificationException</code>s will ever be thrown during iteration - if a collection gets changed while another thread is iterating, that other thread will continue seeing the original (non-changed) data.
</p><p>
There are also a number of lower level concurrency utils like <code>Lock</code>s and <code>Condition</code>s that will be introduced in JDK 5.0. A <code>Lock</code> allows for functionality similar to that provided by the <code>synchronized</code> keyword, but without forcing you to lock and unlock within a single block of code. <code>Lock</code>s also have added options like the ability to check a <code>Lock</code> without waiting infinitely, or timing out <code>Lock</code>s. 
</p><p>
The <code>ReentrantLock</code> class implements a reentrant mutual exclusion lock with the same semantics as built-in monitor locks (<code>synchronized</code>), but with extra features like the ability to interrupt a thread waiting to acquire a lock, specifying a timeout while waiting for a lock, polling for lock availability, and support for multiple wait-sets per lock via the "Condition" interface. <code>ReentrantLock</code> outperforms built-in monitor locks in most cases, but is slightly less convenient to use as it requires a <code>finally</code> block to release lock, like

<blockquote><pre>
Lock lock = new ReentrantLock();
...
lock.lock();
try {
    ...
} finally {
    lock.unlock();
}
</pre></blockquote>
</p><p>
A <code>Condition</code> is the abstraction of <code>wait</code>-<code>notify</code>. You can get a <code>Condition</code> object from an existing <code>Lock</code> object, and subsequently call <code>await()</code> and <code>signal()</code> on them. This allows you to for instance have multiple <code>Condition</code> objects against a single <code>Lock</code>, instead of having to use <code>notifyAll</code> to wake up all threads, only to put all but one of them back into a wait-state.
</p><p>
There are many other useful classes and interfaces like <code>ReadWriteLock</code>, <code>ReentrantReadWriteLock</code>, <code>Semaphore</code>, <code>CountdownLatch</code>, etc.
</p><p>
And last but not least, JDK 5.0 will introduce Atomic Variables: classes that support atomic operations like "compare-and-set" and "get,set-and-arithmetic". At runtime, the JVM will use the best available implementation of this functionality, depending on the platform it runs on. So this may internally be implemented using a lock, or may use a native contruct (if supported by the processor) to do these kinds of atomic operations. An example of an atomic variable class is "<code>AtomicInteger</code>". which will be useful for things like counters and sequence numbers.
</p>
	
	
<!--	
	<div class="posted">Posted by Luke 
        in <a href="cat_java.html">Java</a>
        at <a href="http://www.hutteman.com/weblog/2004/07/04-199.html">12:56 AM</a>
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-comments.cgi?entry_id=199" onclick="OpenComments(this.href); return false">Comments (6)</a>
	
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi?__mode=view&amp;entry_id=199" onclick="OpenTrackback(this.href); return false">TrackBack (3)</a>
	
	</div>
-->	
	</div>

	</div>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://www.hutteman.com/weblog/cat_java.html#000198"
    trackback:ping="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi/161"
    dc:title="JavaOne notes"
    dc:identifier="http://www.hutteman.com/weblog/cat_java.html#000198"
    dc:subject="Java"
    dc:description="Sun&apos;s studio creator has interesting collaboration-options built in: it comes with an instant messenger pane that has code-options, enabling things like copy&apos;n paste of code (which will be sent with code-highlighting), doing code-completion in the IM window, and even sending entire files, which can subsequently be edited synchronously between both parties - very cool stuff. It was announced that &quot;There..."
    dc:creator=""
    dc:date="2004-07-04T00:37:56-05:00" />
</rdf:RDF>
-->


	<a name="000198"></a>

        <div class="day">
	<div class="entryDate">Sunday, July  4, 2004 12:37 AM
		<br><a href="http://www.hutteman.com/weblog/2004/07/04-198.html#comments">4 Comments</a>
	
        </div>
	<div class="entryTitle"><a href="http://www.hutteman.com/weblog/2004/07/04-198.html">JavaOne notes</a></div>

	<div class="blogbody">
	
	<p>Sun's studio creator has interesting collaboration-options built in: it comes with an instant messenger pane that has code-options, enabling things like copy'n paste of code (which will be sent with code-highlighting), doing code-completion in the IM window, and even sending entire files, which can subsequently be edited synchronously between both parties - very cool stuff.</p>

<p>It was announced that "There is no application in the gaming space today that cannot be written in Java". I find this somewhat hard to believe to say the least. The first example they gave to show the power of Java in gaming was a third person shooter that was <i>partially</i> written in Java (that is, none of the actual rendering used Java) not quite what I'd call overwhelming evidence. The second game they showed was 100% Java though and can be downloaded from Java.net. It looked pretty good, but only showed a 3-D view walking through the environment. There were no other characters, let alone any actual action. I don't think managed code is quite at a point yet where it can be used to create games like HalfLife 2, but I'm willing to be proven wrong...</p>

<p>The also showed the phantom gaming service hardware. This is a system, which <i>supports</i> Java (which I assume means it can do Java, but can do other stuff as well), was created by the co-creator of Microsoft's XBox. It is not a regular console, but instead can download games on demand from the network. The hardware will be free with a two-year subscription.</p>

<p>JDK 5 will have less dependence on command-line parameters and instead auto-tune itself for optimal performance. It will use your machine's configuration to come up with an initial config, and dynamically change settings at runtime. This is great news as tweaking stuff like NewSize, SurvivorRatio, etc. can be a major pain. This feature will NOT be turned on by default on windows though (it will be on other platforms) - use the concurrentGC option to enable it on windows.</p>

<p>Lucene is a Java search-engine I'll definitely have to check more into. I think there's a .NET port for this project as well (though I don't know how up-to-date it is with the master Java project) so I may even be able to use it in SharpReader.</p>

<p>The Groovy scripting language is, well, groovy. Using a very powerful and highly condensed syntax, you can write things in Groovy that would take ten times the number of lines in Java. Closures are especially cool. Performance is currently about 20-90% of that of Java (closer to 20% when using dynamic typing (which I guess uses reflection for every method call), closer to 90% for static typing (which takes away from the easy of use of Groovy)). This makes me somewhat sceptical of how useful this language really is right now for production systems. I'm sure they'll be able to beef up performance at some point, but until they do, I think I'd rather spend some extra time and learn Python instead if I want to use a scripting language (although I have to admit that the Java support in Groovy is pretty nice...)</p>
	
	
<!--	
	<div class="posted">Posted by Luke 
        in <a href="cat_java.html">Java</a>
        at <a href="http://www.hutteman.com/weblog/2004/07/04-198.html">12:37 AM</a>
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-comments.cgi?entry_id=198" onclick="OpenComments(this.href); return false">Comments (4)</a>
	
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi?__mode=view&amp;entry_id=198" onclick="OpenTrackback(this.href); return false">TrackBack (0)</a>
	
	</div>
-->	
	</div>

	</div>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://www.hutteman.com/weblog/cat_java.html#000196"
    trackback:ping="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi/159"
    dc:title="JavaOne report: EJB Persistence"
    dc:identifier="http://www.hutteman.com/weblog/cat_java.html#000196"
    dc:subject="Java"
    dc:description="Prior to going to JavaOne, the main subjects I was looking forward to were generics, EJB3 and the AOP panel. The actual experience was different though: sessions on generics did not show me much I had not already read online, and the main thing to take away from the AOP panel was that it can be useful, but don&apos;t overdo..."
    dc:creator=""
    dc:date="2004-07-02T22:37:05-05:00" />
</rdf:RDF>
-->


	<a name="000196"></a>

        <div class="day">
	<div class="entryDate">Friday, July  2, 2004 10:37 PM
		<br><a href="http://www.hutteman.com/weblog/2004/07/02-196.html#comments">2 Comments</a>
	
        </div>
	<div class="entryTitle"><a href="http://www.hutteman.com/weblog/2004/07/02-196.html">JavaOne report: EJB Persistence</a></div>

	<div class="blogbody">
	
	<p>Prior to going to JavaOne, the main subjects I was looking forward to were generics, EJB3 and the AOP panel. The actual experience was different though: sessions on generics did not show me much I had not already read online, and the main thing to take away from the AOP panel was that it can be useful, but don't overdo it - duh. 
</p><p>
The EJB persistence session was interesting though: it looks like the EJB 3.0 spec will finally make Entity beans useful again. No more interfaces to implement, POJOs instead of abstract classes (so you can actually test against them outside of the container) and no more home+remote+bean+2deployment-descriptors per EJB. 
</p><p>
Most importantly though, EJBQL becomes vastly more useful, allowing you to use it for almost anything you can do with SQL. You can, for instance, use bulk operations like

<blockquote><pre>
DELETE FROM Customer c 
WHERE c.status = 'inactive'

UPDATE Customer c 
SET c.status = 'outstanding' 
WHERE c.balance < 10000
</pre></blockquote>

Also, there will be support for sub-queries, as in

<blockquote><pre>
SELECT goodCustomer 
FROM Customer goodCustomer
WHERE goodCustomer.balance < (SELECT AVG(c.balance) FROM Customer c)

SELECT DISTINCT emp 
FROM Employee emp
WHERE EXISTS(SELECT spouseEmp 
             FROM Employee spouseEmp 
             WHERE spouseEmp = emp.spouse)
</pre></blockquote>

and joins will also be supported:

<blockquote><pre>
SELECT i.category 
FROM Item i JOIN j.bids b WHERE b.amount > :amount

SELECT i 
FROM Item i LEFT JOIN FETCH i.bids WHERE i.category = 'paintings'
</pre></blockquote>

The <code>FETCH</code> above means that the bids objects will be prefetched from the database when the items are retrieved, instead of the current situation where there will be one extra query for every bid object.
</p><p>
EJBQL will even support <code>GROUP BY</code> and <code>HAVING</code>. My personal favorite though is projection, allowing you to retrieve select fields from select objects, as in

<blockquote><pre>
SELECT c.id, c.status 
FROM Customer c JOIN c.orders o WHERE o.count > 100 (returns object array)

SELECT new CustomerDetails(c.id, c.status, o.count) 
FROM Customer c JOIN c.orders o WHERE o.count > :ordercount
</pre></blockquote>

The first query will return an Object-array, the second will return actual <code>CustomerDetails</code> objects. 
</p><p>
As interesting as all this was though, it still wasn't my favorite session, on which I'll blog more later this weekend...
</p>



	
	
<!--	
	<div class="posted">Posted by Luke 
        in <a href="cat_java.html">Java</a>
        at <a href="http://www.hutteman.com/weblog/2004/07/02-196.html">10:37 PM</a>
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-comments.cgi?entry_id=196" onclick="OpenComments(this.href); return false">Comments (2)</a>
	
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi?__mode=view&amp;entry_id=196" onclick="OpenTrackback(this.href); return false">TrackBack (0)</a>
	
	</div>
-->	
	</div>

	</div>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://www.hutteman.com/weblog/cat_java.html#000195"
    trackback:ping="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi/158"
    dc:title="My JavaOne Schedule for today"
    dc:identifier="http://www.hutteman.com/weblog/cat_java.html#000195"
    dc:subject="Java"
    dc:description=" 9:45-10:45 Lucene in Action 11:00-12:00 XQuery API for Java Technology (Esplanade 307/3) 12:15-1:15 Observability Architecture in J2SETM Platform Release 1.5 (gateway 102/103) 1:30-2:30 Still more programming puzzlers (Gateway 102/103) 2:45-3:45 Expert Panel on Agile Java Technology-based Development 4:00-5:00 the Groovy Programming Language..."
    dc:creator=""
    dc:date="2004-06-29T10:44:40-05:00" />
</rdf:RDF>
-->


	<a name="000195"></a>

        <div class="day">
	<div class="entryDate">Tuesday, June 29, 2004 10:44 AM
		<br><a href="http://www.hutteman.com/weblog/2004/06/29-195.html#comments">5 Comments</a>
	
        </div>
	<div class="entryTitle"><a href="http://www.hutteman.com/weblog/2004/06/29-195.html">My JavaOne Schedule for today</a></div>

	<div class="blogbody">
	
	<p>
<ul>
<li>9:45-10:45 <a href="http://www.javaone04.com/catalog/schedule/staticSessionDetail.jsp?SESSION_ID=11363">Lucene in Action</a> 
<li>11:00-12:00 <a href="http://www.javaone04.com/catalog/schedule/modifySession.jsp?SESSION_ID=9991&day_id=11&startTime=660">XQuery API for Java Technology</a> (Esplanade 307/3)
<li>12:15-1:15 <a href="http://www.javaone04.com/catalog/schedule/modifySession.jsp?SESSION_ID=11434&day_id=11&startTime=735">Observability Architecture in J2SETM Platform Release 1.5</a> (gateway 102/103)
<li>1:30-2:30 <a href="http://www.javaone04.com/catalog/schedule/modifySession.jsp?SESSION_ID=10944&day_id=11&startTime=810">Still more programming puzzlers</a> (Gateway 102/103)
<li>2:45-3:45 <a href="http://www.javaone04.com/catalog/schedule/modifySession.jsp?SESSION_ID=10556&day_id=11&startTime=885">Expert Panel on Agile Java Technology-based Development</a>
<li>4:00-5:00 <a href="">the Groovy Programming Language</a>
</ul>
</p>
	
	
<!--	
	<div class="posted">Posted by Luke 
        in <a href="cat_java.html">Java</a>
        at <a href="http://www.hutteman.com/weblog/2004/06/29-195.html">10:44 AM</a>
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-comments.cgi?entry_id=195" onclick="OpenComments(this.href); return false">Comments (3)</a>
	
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi?__mode=view&amp;entry_id=195" onclick="OpenTrackback(this.href); return false">TrackBack (2)</a>
	
	</div>
-->	
	</div>

	</div>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://www.hutteman.com/weblog/cat_java.html#000194"
    trackback:ping="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi/157"
    dc:title="JavaOne Blogger Meetup"
    dc:identifier="http://www.hutteman.com/weblog/cat_java.html#000194"
    dc:subject="Java"
    dc:description="Last night&apos;s blogger meetup was a blast. It was great to actually meet the people behind the blogs. I talked to Tim Bray, Simon Phipps, MaryMary, Cedric, Cameron, Mike, Charles, Matt, Russel Beattie (which is pronounced Bee-Ah-Tee, not Bee-tee) and many others. Unfortunately I missed out on Hani (who I would&apos;ve loved to introduce to Russel :-) and EricGu (who..."
    dc:creator=""
    dc:date="2004-06-29T09:24:20-05:00" />
</rdf:RDF>
-->


	<a name="000194"></a>

        <div class="day">
	<div class="entryDate">Tuesday, June 29, 2004  9:24 AM
	
        </div>
	<div class="entryTitle"><a href="http://www.hutteman.com/weblog/2004/06/29-194.html">JavaOne Blogger Meetup</a></div>

	<div class="blogbody">
	
	<p>Last night's blogger meetup was a blast. It was great to actually meet the people behind the blogs. I talked to <a href="http://www.tbray.org/ongoing/When/200x/2004/06/28/J1D1">Tim Bray</a>, <a href="http://www.webmink.net/minkblog.htm">Simon Phipps</a>, <a href="http://blogs.sun.com/roller/page/mary/20040628">MaryMary</a>, <a href="http://www.beust.com/weblog/">Cedric</a>, <a href="http://www.jroller.com/page/cpurdy">Cameron</a>, <a href="http://blogs.atlassian.com/rebelutionary/">Mike</a>, <a href="http://fishbowl.pastiche.org/">Charles</a>, <a href="http://raibledesigns.com/page/rd">Matt</a>, <a href="http://www.russellbeattie.com/notebook/">Russel Beattie</a> (which is pronounced Bee-Ah-Tee, not Bee-tee) and many others. Unfortunately I missed out on <a href="http://www.jroller.com/page/fate/20040628#javaone_day_one_yawnfest">Hani</a> (who I would've loved to introduce to Russel :-) and <a href="blogs.msdn.com/ericgu">EricGu</a> (who may have been chased out of there before I showed up on account of being from the so-called "dark" side). Even a new kid on the blog: <a href="http://blogs.sun.com/roller/page/jonathan/">Jonathan Schwartz</a> was there, though I did not get a chance to talk to him. Interesting to see some someone like him start a blog; I hope he'll actually be able to put some personal opinions in there and not just use it as a marketing tool. Who knows: maybe Joshua Bloch will start a blog soon too (the Bloch Blog?); now THAT would be one to subscribe to.</p>
	
	
<!--	
	<div class="posted">Posted by Luke 
        in <a href="cat_java.html">Java</a>
        at <a href="http://www.hutteman.com/weblog/2004/06/29-194.html"> 9:24 AM</a>
	
		| <a href="http://www.hutteman.com/scgi-bin/mt/mt-tb.cgi?__mode=view&amp;entry_id=194" onclick="OpenTrackback(this.href); return false">TrackBack (0)</a>
	
	</div>
-->	
	</div>

	</div>

</div>
<a href="http://www.freecookingrecipes.net"><img src="/weblog/dot_clear.gif" hspace="0" vspace="0" border="0" alt="cooking recipes"></a>
</div>

<div class="copy">
Copyright &copy; 2003, 2004 Luke Hutteman
</div>

</body>
</html>

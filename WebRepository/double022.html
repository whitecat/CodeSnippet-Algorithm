<html>
<head>
<title>JAVA: Convert binary data to double, float, int, long</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="/style.css" type="text/css">
<link REL="icon" HREF="/capicon.gif" TYPE="image/gif">
<script type="text/javascript" language="JavaScript" src="/home/captain.js"></script>
<META NAME="Description" CONTENT="An interdisciplinary website for science, programming, electronics and more.">
<META NAME="Keywords" CONTENT="science, programming, electronics, Linux, RTAI, fusion, ADEOS, Java, C, hard real time, microcontroller, Atmel, PIC, MMC, E2PROM, FreeBSD">
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0037B4" vlink="#333333" alink="#0000ff" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="top"></a><table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td bgcolor="#000000" height=52> 
      <table width="100%" height="108" border="0" cellspacing="0" cellpadding="0" background="/home/ship-back.jpg">
        <tr> 
          <td width="50%" valign="top"><a href="/"><img src="/home/ship-back2.jpg" width="395" height="80" border="0" alt="Captain's Universe Home" title="Captain's Universe Home"><br><img src="/home/ship-back3.jpg" width="395" height="29" border="0" alt="Captain's Universe Home" title="Captain's Universe Home"></a></td>
          <td width="50%" align="right">
						<table cellspacing="4" cellpadding="0" width="300">
				<tr>
				<td rowspan="4">
				</td>
				<td bgcolor="#1a5a94" NOWRAP align="center" class="topt"><a class="nav" href="http://www.cosmicrays.org/">Cosmic Ray Muon Detector</a></td><td bgcolor="#1a5a94" NOWRAP align="center" class="topt"><a class="nav" href="http://www.telegarden.org/tg/">TeleGarden Pages</a></td>
				</tr>
				<tr bgcolor="#1a5a94">
				<td NOWRAP align="center" class="topt"><a class="nav" href="http://www.marsbase.net/">Time on Mars</a></td><td NOWRAP align="center" class="topt"><a class="nav" href="http://www.bryophyllum.com/">Bryophyllum Plants</a></td>
				</tr>
				<tr bgcolor="#1a5a94">
				<td NOWRAP align="center" class="topt"><a class="nav" href="http://www.jupiterradio.com/j/articles/prob/">Jupiter Radio Astronomy</a></td><td NOWRAP align="center" class="topt"><a class="nav" href="http://www.ancientcoins.biz/pages/">Ancient Pages</a></td>
				</tr>
				<tr bgcolor="#1a5a94">
				<td NOWRAP align="center" class="topt"><a class="nav" href="http://www.telegarden.org/salzburg.php">Salzburg Tourist Guide</a></td><td NOWRAP align="center" class="topt"><a class="nav" href="http://www.magnetometer.org/">Earth Magnetometer</a></td>
				</tr>
			</table>			
          </td>
        </tr>
      </table>
    </td>
  </tr>
  <tr> 
    <td bgcolor="#FFFFFF"><img src="/t3.gif" width="1" height="3"></td>
  </tr>
  <tr> 
    <td bgcolor="#000000" height="23"> 
      <table width="100%" border="0" cellspacing="0" cellpadding="3" class="capmenu">
        <tr> 
		<td width="100%"><a class="nbv" style="display: inline;" href="/">&nbsp; H O M E &nbsp;</a></td>
          <td NOWRAP class="nax"><a class="nbv" href="/ajax.php">&nbsp; AJAX &amp; MORE &nbsp;</a> </td>
          <td NOWRAP class="nax"><a class="nbv" href="/linux.php">&nbsp; LINUX &amp; MORE &nbsp;</a> </td>
          <td NOWRAP class="nax"><a class="nbv" href="/rtai.php">&nbsp; RTAI &nbsp;</a> </td>
          <td NOWRAP class="nax"><a class="nbv" href="/xenomai.php">&nbsp; XENOMAI &nbsp;</a> </td>
          <td NOWRAP class="nax"><a class="nbv" href="/adeos-ipipe.php">&nbsp; ADEOS IPIPE &nbsp;</a> </td>
          <td NOWRAP class="nay"> &nbsp; &nbsp; </td>
        </tr>
      </table>
      <table width="100%" border="0" cellspacing="0" cellpadding="3" class="capmenu">
        <tr> 
		<td width="100%">&nbsp;</td>
          <td NOWRAP class="nax"><a class="na" href="/browsers.php">&nbsp; JAVA &amp; BROWSERS &nbsp;</a> </td>
          <td NOWRAP class="nax"><a class="nbv" href="/nix.php">&nbsp; *NIX &nbsp;</a> </td>
          <td NOWRAP class="nax"><a class="nbv" href="/electronic-index.php">&nbsp; ELECTRONICS &nbsp;</a> </td>
          <td NOWRAP class="nax"><a class="nbv" href="/review-index.php">&nbsp; REVIEWS &nbsp;</a> </td>
          <td NOWRAP class="nax"><a class="nbv" href="/artemia/">&nbsp; ARTEMIA &nbsp;</a></td>
          <td NOWRAP class="nax"><a class="nbv" href="/fairy-shrimp.php">&nbsp; FAIRY SHRIMP &nbsp;</a></td>
          <td NOWRAP class="nay"> &nbsp; &nbsp; </td>
        </tr>
      </table>
    </td>
  </tr>
  <tr> 
    <td bgcolor="#FFFFFF"><img src="/t3.gif" width="1" height="3"></td>
  </tr>

  <tr> 
    <td bgcolor="#ffffff" valign="top">
      <table width="100%" border="0" cellspacing="0" cellpadding="0" height="100%">
        <tr>
          <td bgcolor="#EEEEEE" valign="top">
<table width=180 border=0 cellspacing=0 cellpadding=7><tr><td>

<ul class="uli">
<li class="mcon"><b>JAVA</b><br><img src="/spacer.gif" width="1" height="8"><br></li>

<li><a class="menu" href="/howto-java-application-template-1.php"> Java Application Template GUI Tutorial</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-java-serial-port-console.php"> JAVA: Serial Port Console for Windows, Linux etc.</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-java-serial-port-javax-comm-rxtx.php"> JAVA: Serial Port access with javax.comm or rxtx</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-java-convert-binary-data.php" style="font-weight: bold;"> JAVA: Convert binary data to double, float, int, long</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/programming/java/"> Java - open a local file from an applet</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/programming/java/executable-java-application.php"> JAVA application - executable JAR archive</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/review-noclassdeffounderror.php"> java.lang. NoClassDefFoundError - javac: target release 1.1 conflicts with default source release 1.5</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/review-ms-java-sun-java.php"> SUN Java vs. MicroSoft Java plugin for the browser</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
</ul>

<ul class="uli">
<li class="mcon"><b>MOZILLA, FIREFOX, SEAMONKEY</b><br><img src="/spacer.gif" width="1" height="8"><br></li>
<li><a class="menu" href="/howto-firefox-3-flash-player-not-working-displayed.php"> Firefox 3: Flash player not working / displaying movie on Linux</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-run-firefox-3-debian-etch.php"> Running Firefox 3 on Debian Etch with GTK 2.10</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-thunderbird-send-mail-password-dialog.php"> Thunderbird: Send Mail, Password dialog keeps popping  up</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-thunderbird-address-book-abook-mab-could-not-be-read.php"> Thunderbird corrupt address book (abook.mab)</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-thunderbird-mailbox-checker.php"> Thunderbird Mailbox Checker</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/seamonkey-findbar.php"> SeaMonkey Hacking: Adding a FireFox-like FindBar</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/firefox-pagerankstatus-showjavaconsole-extension.php"> Firefox Extension: Show Java Console (showjavaconsole) - Page Rank Status (pagerankstatus)</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/firefox-run-different-versions.php"> Running different Firefox versions side by side</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-firefox-gmail-login-problem.php"> Gmail Login Stops in Firefox</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-firefox-add-search-engine.php"> Add search engines in Firefox</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-firefox-delete-auto-complete-entries.php"> Firefox: Delete auto-complete entries</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/firefox-changes-1.0-1.5.php"> FireFox Changes 1.0 1.5</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-xul-drag-drop-tree.php"> XUL Drag Drop Tree</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-xml-xsl-example.php"> XML-XSL Example</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-xul-tree-new.php"> XUL tree NEW - Adding/editing nodes</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-xul-tree.php"> XUL tree - Adding/editing nodes</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-addeventlistener-attachevent-parameters.php"> addEventListener attachEvent</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-firefox-statusbar-tutorial.php"> Firefox Statusbar Tutorial</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/howto-firefox-toolbar-tutorial.php"> Firefox Toolbar Tutorial</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/programming/xul/"> Mozilla XUL read write local files</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/programming/firefox-classic-theme/"> FireFox Classic Theme</a></li>
<li><a class="menu" href="/howto-sunbird.php"> How to compile Mozilla Sunbird from source</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
<li><a class="menu" href="/review-firefox-popups.php"> FireFox Popup's / Pop-Under's appearing</a><br><img src="/spacer.gif" width="1" height="6"><br></li>
</ul>


</td></tr></table>


	  </td>
          <td width="100%" valign="top"><!-- google_ad_section_start --> 
<br>







<table width="678" border="0" cellspacing="0" cellpadding="2" align="center">
  <tr> 
    <td><span class="mcon"><br><br>

<b>JAVA: Convert binary data to double, float, int, long</b>
<br><br>
Quite often you have binary data, consisting of e.g. 4 byte float values or 8 byte double values.
It saves storage place if you store numeric data in binary form, but reading it back can be
a challange, especially in languages where such conversions are not common.
<br><br>

 

<script type="text/javascript"><!--
google_ad_client = "pub-3524547136592145";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text";
google_ad_channel ="";
google_color_border = "FFFFFF";
google_color_link = "000000";
google_color_bg = "FFFFFF";
google_color_text = "000000";
google_color_url = "000000";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>






<br>
Given you have a file "data.bin" consisting of float numbers with 4 bytes each and you want
to read them into a JAVA float array.<br>
You read the file, convert the numbers and write them in a float[] array:

<pre>
float[] myarray = new float[100000];
try {
   File file = new File("data.bin");
   InputStream is = new FileInputStream(file);
   DataInputStream dis = new DataInputStream( is );
   long length = file.length();
   if (length > Integer.MAX_VALUE) {
      throw new IOException("File is too large");
   } else {
      byte[] bytes = new byte[(int)length];
      int offset = 0;
      int numRead = 0;
      while (offset &lt; bytes.length &amp;&amp; 
         (numRead = is.read(bytes, offset, bytes.length-offset) ) >= 0) {
         offset += numRead;
      }
      if (offset &lt; bytes.length) {
         throw new IOException("Could not completely read file "+file.getName());
      }
      dis.close();
      is.close();
      System.out.println("offset="+offset);

      for (int start = 0; start &lt; offset; start = start + 4) {
         myarray[cnt] = arr2float(bytes, start);
         cnt++;
      }
   }
} catch (Exception e) {
   e.printStackTrace();
}
</pre>
<br>
<b>Here are the functions for converting binary bytes to double, long, int or float</b>

<br><br>
<b>Function for conversion of an 8 byte array to double:</b>
<pre>
	public static double arr2double (byte[] arr, int start) {
		int i = 0;
		int len = 8;
		int cnt = 0;
		byte[] tmp = new byte[len];
		for (i = start; i &lt; (start + len); i++) {
			tmp[cnt] = arr[i];
			//System.out.println(java.lang.Byte.toString(arr[i]) + " " + i);
			cnt++;
		}
		long accum = 0;
		i = 0;
		for ( int shiftBy = 0; shiftBy &lt; 64; shiftBy += 8 ) {
			accum |= ( (long)( tmp[i] &amp; 0xff ) ) &lt;&lt; shiftBy;
			i++;
		}
		return Double.longBitsToDouble(accum);
	}
</pre>
<br><br>

 

<script type="text/javascript"><!--
google_ad_client = "pub-3524547136592145";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text";
google_ad_channel ="";
google_color_border = "FFFFFF";
google_color_link = "000000";
google_color_bg = "FFFFFF";
google_color_text = "000000";
google_color_url = "000000";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>






<br>
<b>Function for conversion of an 4 byte array to long:</b>
<pre>
	public static long arr2long (byte[] arr, int start) {
		int i = 0;
		int len = 4;
		int cnt = 0;
		byte[] tmp = new byte[len];
		for (i = start; i &lt; (start + len); i++) {
			tmp[cnt] = arr[i];
			cnt++;
		}
		long accum = 0;
		i = 0;
		for ( int shiftBy = 0; shiftBy &lt; 32; shiftBy += 8 ) {
			accum |= ( (long)( tmp[i] &amp; 0xff ) ) &lt;&lt; shiftBy;
			i++;
		}
		return accum;
	}
</pre>
<br>
<b>Function for conversion of an 2 byte array to int:</b>
<pre>
	public static int arr2int (byte[] arr, int start) {
		int low = arr[start] &amp; 0xff;
		int high = arr[start+1] &amp; 0xff;
		return (int)( high &lt;&lt; 8 | low );
	}

</pre>

<br><br>

 

<script type="text/javascript"><!--
google_ad_client = "pub-3524547136592145";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text";
google_ad_channel ="";
google_color_border = "FFFFFF";
google_color_link = "000000";
google_color_bg = "FFFFFF";
google_color_text = "000000";
google_color_url = "000000";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>






<br>

<b>Function for conversion of an 4 byte array to a float:</b>
<pre>
	public static float arr2float (byte[] arr, int start) {
		int i = 0;
		int len = 4;
		int cnt = 0;
		byte[] tmp = new byte[len];
		for (i = start; i &lt; (start + len); i++) {
			tmp[cnt] = arr[i];
			cnt++;
		}
		int accum = 0;
		i = 0;
		for ( int shiftBy = 0; shiftBy &lt; 32; shiftBy += 8 ) {
			accum |= ( (long)( tmp[i] &amp; 0xff ) ) &lt;&lt; shiftBy;
			i++;
		}
		return Float.intBitsToFloat(accum);
	}
</pre>

<br><br>

Last-Modified: Sun, 12 Mar 2006 21:31:24 GMT</span></p>
    </td>
  </tr>
</table>    

 <!-- google_ad_section_end -->
<center>
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="_top">
<table border="0" bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif"
border="0" alt="Google"></img></a>
</td>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.captain.at"></input>
<input type="text" name="q" size="31" maxlength="255" value=""></input>
<input type="submit" name="sa" value="Search"></input>
</td></tr>
<tr>
<td>&nbsp;</td>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value=""></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.captain.at" checked="checked"></input>
<font size="-1" color="#000000">www.captain.at</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-3524547136592145"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:FFFFFF;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;LH:80;LW:395;L:http://www.captain.at/home/ship-back2.jpg;S:http://www.captain.at;FORID:1;"></input>
<input type="hidden" name="hl" value="en"></input>

</td></tr></table>
</form>
<!-- SiteSearch Google -->
</center>

  

          </td>
          
        </tr>
      </table>
    </td>
  </tr>
  <tr> 
    <td bgcolor="#ffffff"><img src="/t3.gif" width=1 height=3></td>
  </tr>
  <tr> 
   <td bgcolor="#1A5A94">
<table width=100% cellspacing=0 cellpadding=2><tr>
    <td bgcolor="#1A5A94" width=60 height="20"><center><a class="bot" href="#top">go to top</a></center></td>
    <td bgcolor="#1A5A94" height="20">
	<table align=center><tr><td class=bot align="right">&copy; 1996-2010 
	</td><td valign=bottom width="103"><img src="/e.gif" width=103 height=13></td><td class=bot>. All rights reserved.</b></font></center></td></tr>
<tr>
<td colspan="3" class=bot>No reproduction, distribution, publishing or transmission of the copyrighted materials at this site is permitted. <a class="ab" href="/policy.php">Policy</a></td>
</tr>

	</table></td>
    <td bgcolor="#1A5A94" width=60 height="20"><center><a class="bot" href="#top">go to top</a></center></td>
</tr></table>
  </td>
  </tr>
  <tr> 
    <td bgcolor="#ffffff"><img src="/t3.gif" width=1 height=3></td>
  </tr>  
</table>
<script type="text/javascript" language="JavaScript" src="/onw.js"></script>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
<script type="text/javascript">
_uacct = "UA-85090-1";
urchinTracker();
</script>
</body>
</html>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <title>Accessing private methods and fields of a Java class [test] [java] [private] [unit] [reflection] [accessor] [security manager]</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/stylesheets/snippets.css?1239220407" media="screen" rel="Stylesheet" type="text/css" />
    <link href="/stylesheets/minitabs.css?1229957682" media="screen" rel="Stylesheet" type="text/css" />

    <!--[if IE]>
    <link href="/stylesheets/iefixes.css?1229957682" media="screen" rel="Stylesheet" type="text/css" />
    <![endif]-->
    <!-- Use this code block to activate a prestitial if there's one to load -->
<!-- BEGIN ADVERTPRO ADVANCED CODE BLOCK -->

<SCRIPT language="JavaScript" type="text/javascript">
<!--
document.write('<SCR'+'IPT src="http://avpa.javalobby.org/servlet/view/dynamic/javascript/zone?zid=159&pid=0&random='+Math.floor(89999999*Math.random()+10000000)+'&millis='+new Date().getTime()+'" language="JavaScript" type="text/javascript"></SCR'+'IPT>');
//-->
</SCRIPT>

<!-- END ADVERTPRO ADVANCED CODE BLOCK -->
</head>

<body class="post" id="none">
    <div id="container">
      <div id="header">
	<form action="/account/login" method="post">
	    <div id="functions">
	    <a href="/account/signup">Create account</a> or Username: <input id="username" name="username" type="text" /> Password: <input id="password" name="password" type="password" /> <input name="commit" type="submit" value="Log In" /><br />
         <!-- BEGIN ADVERTPRO ADVANCED CODE BLOCK -->

<!-- b style="background-color: #f5f; border-top: solid 1px #660; border-bottom: solid 1px #660; padding: 4px" -->
<!-- %= link_to 'Get your coding job seen by 130,000 coders', :controller => 'ads', :action => 'new' % -->
<!-- /b -->
	    </div>
	</form>
	<p id="title"><a href="http://snippets.dzone.com/">DZone Snippets</a></p><p><em>3235 users tagging and storing useful source code snippets</em></p>
	<!-- p><em>Post code snippets. Sort by tags, people, people and tags, etc..</em></p -->
</div>

      



      




    <div class="green box">
        <h3>Never been to DZone Snippets before?</h3>
        <p><b>Snippets is a <span class='highlighted'>public source code repository.</span></b> Easily build up your personal collection of code snippets, categorize them with tags / keywords, and share them with the world</p>
    </div>



<h1>Accessing private methods and fields of a Java class <span class="related">(<a href="#related">See related posts</a>)</span></h1>
<div id="sidebar">
    <div style="padding-left: 18px">
                   <div id="search_snippets" class="box green">
            <h3>Search DZone Snippets</h3>
            <form action="/search/get_results" method="get">
                <input type="text" name="q" value="" size="20"> <input type="submit" value="Search"/>
            </form>
        </div>
               <div id="mediumRect" class="box">
            <!-- BEGIN ADVERTPRO ADVANCED CODE BLOCK -->

<SCRIPT language="JavaScript" type="text/javascript">
<!--
document.write('<SCR'+'IPT src="http://avpa.javalobby.org/servlet/view/banner/javascript/zone?zid=83&pid=0&random='+Math.floor(89999999*Math.random()+10000000)+'&millis='+new Date().getTime()+'" language="JavaScript" type="text/javascript"></SCR'+'IPT>');
//-->
</SCRIPT>
<NOSCRIPT>
<A href="http://avpa.javalobby.org/servlet/click/zone?zid=83&pid=0&lookup=true&position=1" target="_top">
<IMG src="http://avpa.javalobby.org/servlet/view/banner/image/zone?zid=83&pid=0&position=1" height="250" width="300" hspace="0" vspace="0" border="0" alt="Click Here!">
</A>
</NOSCRIPT>

<!-- END ADVERTPRO ADVANCED CODE BLOCK -->
        </div>
               

        <div id="dzone_latest" class="box blue">
            <h3>Popular @ <a href="http://www.dzone.com">dzone.com</a></h3>
            
                        <p><a href="http://www.dzone.com/links/rss/hesitate_or_haste_a_developers_experiences.html" title="Hesitate or Haste ( A developerâ??s experiences)">
                           Hesitate or Haste ( A developerâ??s experiences)</a></p>
            
                        <p><a href="http://www.dzone.com/links/rss/15_methods_to_boost_your_php_based_websites_perfo.html" title="15 methods to boost your PHP based websiteâ??s performance">
                           15 methods to boost your PHP based websiteâ??s pe...</a></p>
            
                        <p><a href="http://www.dzone.com/links/rss/52framework_first_ever_html5_and_css3_framework_c.html" title="52Framework - First ever HTML5 and CSS3 framework! (cross-browser)">
                           52Framework - First ever HTML5 and CSS3 framewo...</a></p>
            
                        <p><a href="http://www.dzone.com/links/rss/why_facebooks_hiphop_for_php_is_important_news_bu.html" title="Why Facebook's HipHop for PHP is important">
                           Why Facebook's HipHop for PHP is important</a></p>
            
                        <p><a href="http://www.dzone.com/links/rss/defining_and_testing_constraints_on_grails_domain.html" title="Defining and Testing Constraints on Grails Domain Classes">
                           Defining and Testing Constraints on Grails Doma...</a></p>
            
                        <p><a href="http://www.dzone.com/links/rss/large_selection_lists_and_fast_string_concatenati.html" title="Large selection lists and fast string concatenation in JavaScript">
                           Large selection lists and fast string concatena...</a></p>
            
                        <p><a href="http://www.dzone.com/links/rss/dear_python.html" title="Dear Python,">
                           Dear Python,</a></p>
            
        </div>
               					         
        
    </div>
</div>
<div id="main">

  
    

 <div id="post2242">
	<div id="skyscraper" style="float: left;">
<!-- BEGIN ADVERTPRO ADVANCED CODE BLOCK -->

<SCRIPT language="JavaScript" type="text/javascript">
<!--
document.write('<SCR'+'IPT src="http://avpa.dzone.com/servlet/view/banner/javascript/zone?zid=174&pid=0&random='+Math.floor(89999999*Math.random()+10000000)+'&millis='+new Date().getTime()+'" language="JavaScript" type="text/javascript"></SCR'+'IPT>');
//-->
</SCRIPT>
<NOSCRIPT>
<A href="http://avpa.dzone.com/servlet/click/zone?zid=174&pid=0&lookup=true&position=1" target="_top">
<IMG src="http://avpa.dzone.com/servlet/view/banner/image/zone?zid=174&pid=0&position=1" height="600" width="120" hspace="0" vspace="0" border="0" alt="Click Here!">
</A>
</NOSCRIPT>

<!-- END ADVERTPRO ADVANCED CODE BLOCK -->
</div>
  <div class="post">

	<div class="post-body">This class uses reflection to enable you to invoke private methods on a class, or access its private fields. This can be useful for unit testing.<br /><br /><pre>
<span class="ident">import</span> <span class="ident">java</span><span class="punct">.</span><span class="ident">lang</span><span class="punct">.</span><span class="ident">reflect</span><span class="punct">.</span><span class="ident">Field</span><span class="punct">;</span>
<span class="ident">import</span> <span class="ident">java</span><span class="punct">.</span><span class="ident">lang</span><span class="punct">.</span><span class="ident">reflect</span><span class="punct">.</span><span class="ident">InvocationTargetException</span><span class="punct">;</span>
<span class="ident">import</span> <span class="ident">java</span><span class="punct">.</span><span class="ident">lang</span><span class="punct">.</span><span class="ident">reflect</span><span class="punct">.</span><span class="ident">Method</span><span class="punct">;</span>

<span class="ident">import</span> <span class="ident">junit</span><span class="punct">.</span><span class="ident">framework</span><span class="punct">.</span><span class="ident">Assert</span><span class="punct">;</span>

<span class="punct">/</span><span class="regex">**
 * Provides access to private members in classes.
 *</span><span class="punct">/</span>
<span class="ident">public</span> <span class="keyword">class </span><span class="class">PrivateAccessor</span> <span class="punct">{</span>
	
  <span class="ident">public</span> <span class="ident">static</span> <span class="constant">Object</span> <span class="ident">getPrivateField</span> <span class="punct">(</span><span class="constant">Object</span> <span class="ident">o</span><span class="punct">,</span> <span class="constant">String</span> <span class="ident">fieldName</span><span class="punct">)</span> <span class="punct">{</span>   
	 <span class="punct">/</span><span class="regex"></span><span class="punct">/</span> <span class="constant">Check</span> <span class="ident">we</span> <span class="ident">have</span> <span class="ident">valid</span> <span class="ident">arguments</span><span class="punct">...</span> 
    <span class="constant">Assert</span><span class="punct">.</span><span class="ident">assertNotNull</span><span class="punct">(</span><span class="ident">o</span><span class="punct">);</span>
    <span class="constant">Assert</span><span class="punct">.</span><span class="ident">assertNotNull</span><span class="punct">(</span><span class="ident">fieldName</span><span class="punct">);</span>
    
    <span class="punct">/</span><span class="regex"></span><span class="punct">/</span> <span class="constant">Go</span> <span class="keyword">and</span> <span class="ident">find</span> <span class="ident">the</span> <span class="ident">private</span> <span class="ident">field</span><span class="punct">...</span> 
    <span class="ident">final</span> <span class="constant">Field</span> <span class="ident">fields</span><span class="punct">[]</span> <span class="punct">=</span> <span class="ident">o</span><span class="punct">.</span><span class="ident">getClass</span><span class="punct">().</span><span class="ident">getDeclaredFields</span><span class="punct">();</span>
    <span class="keyword">for</span> <span class="punct">(</span><span class="ident">int</span> <span class="ident">i</span> <span class="punct">=</span> <span class="number">0</span><span class="punct">;</span> <span class="ident">i</span> <span class="punct">&lt;</span> <span class="ident">fields</span><span class="punct">.</span><span class="ident">length</span><span class="punct">;</span> <span class="punct">++</span><span class="ident">i</span><span class="punct">)</span> <span class="punct">{</span>
      <span class="keyword">if</span> <span class="punct">(</span><span class="ident">fieldName</span><span class="punct">.</span><span class="ident">equals</span><span class="punct">(</span><span class="ident">fields</span><span class="punct">[</span><span class="ident">i</span><span class="punct">].</span><span class="ident">getName</span><span class="punct">()))</span> <span class="punct">{</span>
        <span class="ident">try</span> <span class="punct">{</span>
          <span class="ident">fields</span><span class="punct">[</span><span class="ident">i</span><span class="punct">].</span><span class="ident">setAccessible</span><span class="punct">(</span><span class="constant">true</span><span class="punct">);</span>
          <span class="keyword">return</span> <span class="ident">fields</span><span class="punct">[</span><span class="ident">i</span><span class="punct">].</span><span class="ident">get</span><span class="punct">(</span><span class="ident">o</span><span class="punct">);</span>
        <span class="punct">}</span> 
        <span class="ident">catch</span> <span class="punct">(</span><span class="constant">IllegalAccessException</span> <span class="ident">ex</span><span class="punct">)</span> <span class="punct">{</span>
          <span class="constant">Assert</span><span class="punct">.</span><span class="ident">fail</span> <span class="punct">(&quot;</span><span class="string">IllegalAccessException accessing </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">fieldName</span><span class="punct">);</span>
        <span class="punct">}</span>
      <span class="punct">}</span>
    <span class="punct">}</span>
    <span class="constant">Assert</span><span class="punct">.</span><span class="ident">fail</span> <span class="punct">(&quot;</span><span class="string">Field '</span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">fieldName</span> <span class="punct">+&quot;</span><span class="string">' not found</span><span class="punct">&quot;);</span>
    <span class="keyword">return</span> <span class="ident">null</span><span class="punct">;</span>
  <span class="punct">}</span>
  
  <span class="ident">public</span> <span class="ident">static</span> <span class="constant">Object</span> <span class="ident">invokePrivateMethod</span> <span class="punct">(</span><span class="constant">Object</span> <span class="ident">o</span><span class="punct">,</span> <span class="constant">String</span> <span class="ident">methodName</span><span class="punct">,</span> <span class="constant">Object</span><span class="punct">[]</span> <span class="ident">params</span><span class="punct">)</span> <span class="punct">{</span>   
		 <span class="punct">/</span><span class="regex"></span><span class="punct">/</span> <span class="constant">Check</span> <span class="ident">we</span> <span class="ident">have</span> <span class="ident">valid</span> <span class="ident">arguments</span><span class="punct">...</span> 
	    <span class="constant">Assert</span><span class="punct">.</span><span class="ident">assertNotNull</span><span class="punct">(</span><span class="ident">o</span><span class="punct">);</span>
	    <span class="constant">Assert</span><span class="punct">.</span><span class="ident">assertNotNull</span><span class="punct">(</span><span class="ident">methodName</span><span class="punct">);</span>
	    <span class="constant">Assert</span><span class="punct">.</span><span class="ident">assertNotNull</span><span class="punct">(</span><span class="ident">params</span><span class="punct">);</span>
	    
	    <span class="punct">/</span><span class="regex"></span><span class="punct">/</span> <span class="constant">Go</span> <span class="keyword">and</span> <span class="ident">find</span> <span class="ident">the</span> <span class="ident">private</span> <span class="ident">method</span><span class="punct">...</span> 
	    <span class="ident">final</span> <span class="constant">Method</span> <span class="ident">methods</span><span class="punct">[]</span> <span class="punct">=</span> <span class="ident">o</span><span class="punct">.</span><span class="ident">getClass</span><span class="punct">().</span><span class="ident">getDeclaredMethods</span><span class="punct">();</span>
	    <span class="keyword">for</span> <span class="punct">(</span><span class="ident">int</span> <span class="ident">i</span> <span class="punct">=</span> <span class="number">0</span><span class="punct">;</span> <span class="ident">i</span> <span class="punct">&lt;</span> <span class="ident">methods</span><span class="punct">.</span><span class="ident">length</span><span class="punct">;</span> <span class="punct">++</span><span class="ident">i</span><span class="punct">)</span> <span class="punct">{</span>
	      <span class="keyword">if</span> <span class="punct">(</span><span class="ident">methodName</span><span class="punct">.</span><span class="ident">equals</span><span class="punct">(</span><span class="ident">methods</span><span class="punct">[</span><span class="ident">i</span><span class="punct">].</span><span class="ident">getName</span><span class="punct">()))</span> <span class="punct">{</span>
	        <span class="ident">try</span> <span class="punct">{</span>
	          <span class="ident">methods</span><span class="punct">[</span><span class="ident">i</span><span class="punct">].</span><span class="ident">setAccessible</span><span class="punct">(</span><span class="constant">true</span><span class="punct">);</span>
	          <span class="keyword">return</span> <span class="ident">methods</span><span class="punct">[</span><span class="ident">i</span><span class="punct">].</span><span class="ident">invoke</span><span class="punct">(</span><span class="ident">o</span><span class="punct">,</span> <span class="ident">params</span><span class="punct">);</span>
	        <span class="punct">}</span> 
	        <span class="ident">catch</span> <span class="punct">(</span><span class="constant">IllegalAccessException</span> <span class="ident">ex</span><span class="punct">)</span> <span class="punct">{</span>
	          <span class="constant">Assert</span><span class="punct">.</span><span class="ident">fail</span> <span class="punct">(&quot;</span><span class="string">IllegalAccessException accessing </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">methodName</span><span class="punct">);</span>
	        <span class="punct">}</span>
	        <span class="ident">catch</span> <span class="punct">(</span><span class="constant">InvocationTargetException</span> <span class="ident">ite</span><span class="punct">)</span> <span class="punct">{</span>
	        	<span class="constant">Assert</span><span class="punct">.</span><span class="ident">fail</span> <span class="punct">(&quot;</span><span class="string">InvocationTargetException accessing </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">methodName</span><span class="punct">);</span>	        	
	        <span class="punct">}</span>
	      <span class="punct">}</span>
	    <span class="punct">}</span>
	    <span class="constant">Assert</span><span class="punct">.</span><span class="ident">fail</span> <span class="punct">(&quot;</span><span class="string">Method '</span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">methodName</span> <span class="punct">+&quot;</span><span class="string">' not found</span><span class="punct">&quot;);</span>
	    <span class="keyword">return</span> <span class="ident">null</span><span class="punct">;</span>
	  <span class="punct">}</span>  
<span class="punct">}</span>
</pre></div>
	
	<div class="post-metadata">to <a href="/tag/test" class="tag ">test</a> <a href="/tag/java" class="tag ">java</a> <a href="/tag/private" class="tag ">private</a> <a href="/tag/unit" class="tag ">unit</a> <a href="/tag/reflection" class="tag ">reflection</a> <a href="/tag/accessor" class="tag ">accessor</a> <a href="/tag/security+manager" class="tag ">security manager</a>  by <a href="/user/Kenshi">Kenshi</a> on Tue Jul 04 06:13:24 -0400 2006<!-- strftime("%Y-%m-%d") --> 
	
	
    </div><br />

  </div>
 </div>

 <a name="comments"></a>

 
	
		<p>You need to <a href="/account/signup">create an account</a> or log in to post comments to this site.</p>
	
 

</div>
        <br />

<center><big><b><a href="/">Click here to browse all 7491 code snippets</a></b></big><br /><br /></center>

        
	<a name="related"></a>
	<div class="box green" style="clear: both;">
	<h3>Related Posts</h3>

	<div id="related-posts">
    <p>
	
	    &raquo;&nbsp;<a href="/posts/show/6288">Auto-test for equals function in java classes th..</a> <span class="post-metadata">in <a href="/tag/test" class="tag ">test</a> <a href="/tag/java" class="tag ">java</a> <a href="/tag/reflection" class="tag ">reflection</a> <a href="/tag/equals" class="tag ">equals</a> <a href="/tag/annotations" class="tag ">annotations</a> </span><br />
	
	    &raquo;&nbsp;<a href="/posts/show/5332">How to eat an elephant in Java</a> <span class="post-metadata">in <a href="/tag/test" class="tag ">test</a> <a href="/tag/java" class="tag ">java</a> <a href="/tag/firstsnippet" class="tag ">firstsnippet</a> </span><br />
	
	    &raquo;&nbsp;<a href="/posts/show/7589">A Simple Introduction to Unit Testing</a> <span class="post-metadata">in <a href="/tag/ruby" class="tag ">ruby</a> <a href="/tag/test" class="tag ">test</a> <a href="/tag/testing" class="tag ">testing</a> <a href="/tag/simple" class="tag ">simple</a> <a href="/tag/unit" class="tag ">unit</a> </span><br />
	
	    &raquo;&nbsp;<a href="/posts/show/3670">2 + 2 = 5</a> <span class="post-metadata">in <a href="/tag/java" class="tag ">java</a> <a href="/tag/reflection" class="tag ">reflection</a> <a href="/tag/evil" class="tag ">evil</a> </span><br />
	
	    &raquo;&nbsp;<a href="/posts/show/4110">Java inflections</a> <span class="post-metadata">in <a href="/tag/java" class="tag ">java</a> <a href="/tag/reflection" class="tag ">reflection</a> </span><br />
	
	    &raquo;&nbsp;<a href="/posts/show/7917">Reflection - get vs getDeclared methods</a> <span class="post-metadata">in <a href="/tag/java" class="tag ">java</a> <a href="/tag/reflection" class="tag ">reflection</a> </span><br />
	


    </p>
    </div>
	</div>
 




 	    <br style="clear: both" />

<div id="footer">
		<p>Snippets originally developed by <a href="http://www.petercooper.co.uk/">Peter Cooper</a> and powered by <a href="http://www.rubyonrails.com/">Ruby On Rails</a>.</p>
        <p>Copyright &copy; 2007 <a href="http://www.dzone.com">DZone, Inc.</a></p>
    <!-- Site Meter -->
	<script type="text/javascript" src="http://sm2.sitemeter.com/js/counter.js?site=sm2snippets">
	</script>
	<noscript>
	<a href="http://sm2.sitemeter.com/stats.asp?site=sm2snippets" target="_top">
	<img src="http://sm2.sitemeter.com/meter.asp?site=sm2snippets" alt="Site Meter" border="0"/></a>
	</noscript>
	<!-- Copyright (c)2006 Site Meter -->
</div>

    </div>
<script src="/javascripts/prototype.js?1229957682" type="text/javascript"></script>
		<script src="/javascripts/effects.js?1229957682" type="text/javascript"></script>
		<script src="/javascripts/dragdrop.js?1229957682" type="text/javascript"></script>
		<script src="/javascripts/controls.js?1229957682" type="text/javascript"></script>
		<script src="/javascripts/general.js?1229957682" type="text/javascript"></script>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-410289-8";
urchinTracker();
</script>
    <!-- Start Quantcast tag -->
    <script type="text/javascript" src="http://edge.quantserve.com/quant.js"></script>
    <script type="text/javascript">
    _qacct="p-ebK_XdQH1HeLo";quantserve();</script>
    <noscript>
    <img src="http://pixel.quantserve.com/pixel/p-ebK_XdQH1HeLo.gif" style="display: none" height="1" width="1" alt="Quantcast"/></noscript>
    <!-- End Quantcast tag -->
     <script type="text/javascript" language="JavaScript" src="http://certify.alexametrics.com/atrk.js"></script>
<script type="text/javascript" language="JavaScript">_atrk_opts = {
atrk_acct: "2Zc291a0g0y12X" }; atrk ();</script>
<noscript><img src="http://certify.alexametrics.com/atrk.gif?account=2Zc291a0g0y12X&jsv=20080822" style="display:none" height="1" width="1"></noscript>
</body>
</html>
